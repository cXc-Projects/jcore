(function(a){a.fn.nivoZoom=function(m){function l(f,b,h){var c=a("img.nivoLarge",b);if(b.hasClass("zoomed")){e.overlay&&a("#nivoOverlay").fadeOut(e.speed/2);a(".nivoCaption",b).length>0&&a(".nivoCaption",b).fadeOut(e.speed/2);c.fadeOut(e.speed/2,function(){f.animate({opacity:1},e.speed/2)});b.removeClass("zoomed")}else{e.overlay&&a("#nivoOverlay").fadeIn(e.speed/2);h.css("opacity","0");f.animate({opacity:0},e.speed/2,function(){c.fadeIn(e.speed/2,function(){if(a(".nivoCaption",b).length>0){var d=
a(".nivoCaption:first",b);if(!d.hasClass("nivo-processed")){var i=f.width();if(i==0)i=f.attr("width");var j=f.height();if(j==0)j=f.attr("height");var g=c.width();if(g==0)g=c.attr("width");var k=c.height();if(k==0)k=c.attr("height");d.css({width:g,opacity:e.captionOpacity});if(b.hasClass("topRight"))d.css({top:k-d.outerHeight()+"px",right:"0px"});else if(b.hasClass("bottomRight"))d.css({bottom:"0px",right:"0px"});else if(b.hasClass("bottomLeft"))d.css({bottom:"0px",left:"0px"});else b.hasClass("center")?
d.css({top:Math.ceil(j/2-k/2)+(k-d.outerHeight())+"px",left:i/2-g/2+"px"}):d.css({top:k-d.outerHeight()+"px",left:"0px"});d.addClass("nivo-processed")}d.fadeIn(e.speed/2)}})});b.addClass("zoomed")}}function n(f,b,h){var c=new Image;a(c).load(function(){a(this).addClass("nivoLarge");a(this).css({position:"absolute",display:"none","z-index":99});navigator.userAgent.match(/MSIE \d\.\d+/)&&b.css("z-index","100");if(b.hasClass("topRight"))a(this).css({top:"0px",right:"0px"});else if(b.hasClass("bottomRight"))a(this).css({bottom:"0px",
right:"0px"});else if(b.hasClass("bottomLeft"))a(this).css({bottom:"0px",left:"0px"});else if(b.hasClass("center")){var d=f.width();if(d==0)d=f.attr("width");var i=f.height();if(i==0)i=f.attr("height");var j=a(this).width();if(j==0)j=a(this).attr("width");var g=a(this).height();if(g==0)g=a(this).attr("height");a(this).css({top:i/2-g/2+"px",left:d/2-j/2+"px"})}else a(this).css({top:"0px",left:"0px"});a(this).attr("title","Click to close");b.append(a(this));h.call(this)}).attr("src",b.attr("href"))}
var e=a.extend({},a.fn.nivoZoom.defaults,m);if(e.overlay)if(!(a.browser.msie&&a.browser.version.substr(0,1)<8)){a("body").prepend('<div id="nivoOverlay" />');a("#nivoOverlay").css({position:"fixed",top:0,left:0,width:"100%",height:"100%",background:e.overlayColor,opacity:e.overlayOpacity,"z-index":90,display:"none"})}return this.each(function(){var f=a(this);a("a.nivoZoom",f).each(function(){var b=a(this);if(b.is("a")){var h=a(this).find("img:first");b.css({position:"relative",display:"inline-block"});
b.attr("title","Click to zoom");b.append('<div class="nivoZoomHover" />');var c=a(".nivoZoomHover",b);c.css("opacity","0");b.hover(function(){b.hasClass("zoomed")||c.stop().animate({opacity:e.zoomHoverOpacity},300)},function(){c.hasClass("loading")||c.stop().animate({opacity:0},300)});b.bind("click",function(){if(a("img.nivoLarge",b).length==0){c.addClass("loading");n(h,b,function(){c.removeClass("loading");l(h,b,c)})}else l(h,b,c);return false})}})})};a.fn.nivoZoom.defaults={speed:500,zoomHoverOpacity:0.8,
overlay:false,overlayColor:"#333",overlayOpacity:0.5,captionOpacity:0.8}})(jQuery);
