(function(g){var r=180/Math.PI,m=function(){},j=function(a,b){return function(){return g.isFunction(b)?b.apply(a,arguments):a[b].apply(a,arguments)}},p=document.documentElement,l,n=!1,o=!1;if(p&&(l=p.style))n=!!(typeof l.transform=="string"||typeof l.MozTransform=="string"||typeof l.WebkitTransform=="string"),o=!!(typeof l.transition=="string"||typeof l.MozTransition=="string"||typeof l.WebkitTransition=="string");var q=n?function(){var a=[],b=this.options.direction,e=this.options.direction in{top:"",
bottom:""},i=this.options.direction in{left:"",top:""}?-1:1,c=parseInt(this.options.radius,10),c=c==0?1:c,f=this.options.clockwise,d={top:"",right:"",bottom:"",left:"",transform:"rotate(0deg) translate(0,0)",MozTransform:"rotate(0deg) translate(0,0)",WebkitTransform:"rotate(0deg) translate(0,0)",OTransform:"rotate(0deg) translate(0,0)"};if(b=="right"&&!f||b=="left"&&f)d.top=0;if(b=="bottom"&&!f||b=="top"&&f)d.right=0;if(b=="left"&&!f||b=="right"&&f)d.bottom=0;if(b=="top"&&!f||b=="bottom"&&f)d.left=
0;this.element.children().css(d).each(function(){var h=g(this),d,j;e?(j=h.outerHeight(!0),d=h.outerWidth()):(j=h.outerWidth(!0),d=h.outerHeight());var k=c;if(b in{top:"",right:""}&&f||b in{bottom:"",left:""}&&!f)k+=d;k=b in{top:"",right:""}?k:-1*k;k=f?k:-1*k;d=e?k+"px 50%":"50% "+k+"px";h.css({transformOrigin:d,MozTransformOrigin:d,OTransformOrigin:d,WebkitTransformOrigin:d});h.css(b,j*-0.5+"px");d=Math.asin(j/c*0.5);h=Math.cos(d)*c;d*=r;h=c-h;h=f?h:-1*h;e?(h=-1*h*i,h+="px,0"):(h*=i,h="0,"+h+"px");
a.push({t:h,a:d,d:j})});this.positioning=a}:function(){var a=[],b=this.options.direction in{top:"",bottom:""};this.element.children().css({left:"",top:"",right:"",bottom:""}).each(function(){var e;e=b?g(this).outerHeight(!0):g(this).outerWidth(!0);e*=-1;a.push(e)});this.positioning=a},s=n?o?function(){clearTimeout(this._timeout);var a=this.positioning,b=0,e=this.options.clockwise?1:-1,i=this.animationDuration,c=i/1E3+"s",f={display:"",transition:"transform "+c+", opacity "+c,MozTransition:"-moz-transform "+
c+", opacity "+c,WebkitTransition:"-webkit-transform "+c+", opacity "+c,OTransition:"-o-transform "+c+", opacity "+c};this.element.children().each(function(d){d=a[d];b+=e*d.a;var c="rotate("+b+"deg) translate("+d.t+")",i={opacity:1,transform:c,MozTransform:c,WebkitTransform:c,OTransform:c};g(this).css(f);setTimeout(j(this,function(){g(this).css(i)}),10);b+=e*d.a});this._timeout=setTimeout(j(this,"_show"),i)}:function(){this.element.children().stop();var a=this.positioning,b=0,e=this.options.clockwise?
1:-1,i=this.animationDuration,c=j(this,"_show");this.element.children().css("display","").each(function(f){f=a[f];b+=e*f.a;g(this).css("transform","translate("+f.t+")").animate({rotate:b,opacity:1},i,c);c=m;b+=e*f.a})}:function(){var a=this.animationDuration,b=this.options.direction,e=this.positioning,i=0,c=j(this,"_show");this.element.children().size();this.element.children().stop().css("display","").each(function(f){i+=e[f];var d={opacity:1};d[b]=i;g(this).animate(d,a,"swing",function(){--f==0&&
c()})})},t=n?o?function(){clearTimeout(this._timeout);var a=this.animationDuration/1E3+"s",a={transition:"transform "+a+", opacity "+a,MozTransition:"-moz-transform "+a+", opacity "+a,WebkitTransition:"-webkit-transform "+a+", opacity "+a,OTransition:"-o-transform "+a+", opacity "+a};this.element.children().css(a);setTimeout(j(this,function(){this.element.children().css({opacity:0,transform:"rotate(0deg) translate(0,0)",MozTransform:"rotate(0deg) translate(0,0)",WebkitTransform:"rotate(0deg) translate(0,0)",
OTransform:"rotate(0deg) translate(0,0)"})}),10);this._timeout=setTimeout(j(this,function(){this.element.children().css("display","none");this._hide()}),this.animationDuration)}:function(){this.element.children().stop();var a=j(this,"_hide"),b=this.element.children().size();this.element.children().animate({rotate:0,opacity:0},this.animationDuration,function(){g(this).css("display","none");--b==0&&a()})}:function(){var a={opacity:0};a[this.options.direction]=0;var b=j(this,"_hide"),e=this.element.children().size();
this.element.children().stop().animate(a,this.animationDuration,function(){g(this).css("display","none");--e==0&&b()})};g.widget("ui.stackmenu",{_init:function(){this.element.addClass("ui-stackmenu");this.element.children().addClass("ui-stackmenu-item").css({opacity:0,display:"none"}).css(this.options.direction,0);this.animationStartTime=this.isShowing=!1;this.animationDuration=this.options.time;this._showCallbackFn=this._hideCallbackFn=m;q.call(this)},show:function(a){this.toggle(!0,a)},hide:function(a){this.toggle(!1,
a)},toggle:function(a,b){if(this.options.disabled!=!0){g.isFunction(a)&&(b=a,a=void 0);var e=a===void 0?!this.isShowing:a,b=g.isFunction(b)?b:m;if(e!=this.isShowing){this._showCallbackFn=this._hideCallbackFn=m;if(this.animationStartTime===!1)this.animationDuration=this.options.time;else{var i=(new Date).getMilliseconds()-this.animationStartTime;this.animationDuration=i=i>this.options.time?this.options.time:i}try{e?(this._trigger("showBefore",{},[this.element.get(0)]),this._showCallbackFn=b,s.call(this)):
(this._trigger("hideBefore",{},[this.element.get(0)]),this._hideCallbackFn=b,t.call(this))}catch(c){}this.isShowing=e}}},destroy:function(){this.element.removeClass("ui-stackmenu");this.element.children().removeClass("ui-stackmenu-item").css({opacity:"",display:"",top:"",right:"",bottom:"",left:"",transformOrigin:"",MozTransformOrigin:"",OTransformOrigin:"",WebkitTransformOrigin:"",transform:"",MozTransform:"",OTransform:"",WebkitTransform:"",transition:"",MozTransition:"",WebkitTransition:"",OTransition:""});
g.widget.prototype.destroy.apply(this,arguments)},option:function(a,b){if(b===void 0)return g.widget.prototype.option.apply(this,arguments);if(this.options[a]!==b){if(a in{direction:"",clockwise:"",radius:""}){if(a=="direction"&&!(b in{top:"",right:"",bottom:"",left:""}))return;var e=j(this,q);if(this.isShowing){var i=j(this,"show"),c=j(this,function(){this.options[a]=b});this.hide(function(){c();e();setTimeout(i,10)})}else this.options[a]=b,e();return b}if(a=="time")this.options.time=b;else return g.widget.prototype.option.apply(this,
arguments)}},_show:function(){this.animationStartTime=!1;this._call_callbacks("show")},_hide:function(){this.animationStartTime=!1;this._call_callbacks("hide")},_call_callbacks:function(a){try{if(this["_"+a+"CallbackFn"]){var b=g.Event({});b.type=this.widgetEventPrefix+a;this["_"+a+"CallbackFn"].call(this.element.get(0),b,this.element.get(0))}}catch(e){}this._trigger(a,{},this.element.get(0))}});g.extend(g.ui.stackmenu,{defaults:{direction:"top",clockwise:!0,radius:"1000px",time:500}})})(jQuery);
