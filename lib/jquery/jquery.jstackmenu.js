(function(g){var u=180/Math.PI,p=function(){},l=function(a,b){return function(){return g.isFunction(b)?b.apply(a,arguments):a[b].apply(a,arguments)}},n=document.documentElement,k,q=false,r=false;if(n&&(k=n.style)){q=!!(typeof k.transform=="string"||typeof k.MozTransform=="string"||typeof k.WebkitTransform=="string");r=!!(typeof k.transition=="string"||typeof k.MozTransition=="string"||typeof k.WebkitTransition=="string")}n=function(){var a=[],b=this.options.direction in{top:"",bottom:""};this.element.children().css({left:"",
top:"",right:"",bottom:""}).each(function(){var c;c=b?g(this).outerHeight(true):g(this).outerWidth(true);c=-1*c;a.push(c)});this.positioning=a};k=function(){var a=[],b=this.options.direction,c=this.options.direction in{top:"",bottom:""},h=this.options.direction in{left:"",top:""}?-1:1,d=parseInt(this.options.radius,10);d=d==0?1:d;var f=this.options.clockwise,i={top:"",right:"",bottom:"",left:"",transform:"rotate(0deg) translate(0,0)",MozTransform:"rotate(0deg) translate(0,0)",WebkitTransform:"rotate(0deg) translate(0,0)",
OTransform:"rotate(0deg) translate(0,0)"};if(b=="right"&&!f||b=="left"&&f)i.top=0;if(b=="bottom"&&!f||b=="top"&&f)i.right=0;if(b=="left"&&!f||b=="right"&&f)i.bottom=0;if(b=="top"&&!f||b=="bottom"&&f)i.left=0;this.element.children().css(i).each(function(){var e=g(this),j,o;if(c){o=e.outerHeight(true);j=e.outerWidth()}else{o=e.outerWidth(true);j=e.outerHeight()}var m=d;if(b in{top:"",right:""}&&f||b in{bottom:"",left:""}&&!f)m+=j;m=b in{top:"",right:""}?m:-1*m;m=f?m:-1*m;j=c?m+"px 50%":"50% "+m+"px";
e.css({transformOrigin:j,MozTransformOrigin:j,OTransformOrigin:j,WebkitTransformOrigin:j});e.css(b,o*-0.5+"px");j=Math.asin(o/d*0.5);e=Math.cos(j)*d;j*=u;e=d-e;e=f?e:-1*e;if(c){e=-1*e*h;e+="px,0"}else{e*=h;e="0,"+e+"px"}a.push({t:e,a:j,d:o})});this.positioning=a};var t=q?k:n;n=function(){var a=this.animationDuration,b=this.options.direction,c=this.positioning,h=0,d=l(this,"_show");this.element.children().size();this.element.children().stop().css("display","").each(function(f){h+=c[f];var i={opacity:1};
i[b]=h;g(this).animate(i,a,"swing",function(){--f==0&&d()})})};k=function(){this.element.children().stop();var a=this.positioning,b=0,c=this.options.clockwise?1:-1,h=this.animationDuration,d=l(this,"_show");this.element.children().css("display","").each(function(f){f=a[f];b+=c*f.a;g(this).css("transform","translate("+f.t+")").animate({rotate:b,opacity:1},h,d);d=p;b+=c*f.a})};var s=function(){clearTimeout(this._timeout);var a=this.positioning,b=0,c=this.options.clockwise?1:-1,h=this.animationDuration,
d=h/1E3+"s",f={display:"",transition:"transform "+d+", opacity "+d,MozTransition:"-moz-transform "+d+", opacity "+d,WebkitTransition:"-webkit-transform "+d+", opacity "+d,OTransition:"-o-transform "+d+", opacity "+d};this.element.children().each(function(i){i=a[i];b+=c*i.a;var e="rotate("+b+"deg) translate("+i.t+")",j={opacity:1,transform:e,MozTransform:e,WebkitTransform:e,OTransform:e};g(this).css(f);setTimeout(l(this,function(){g(this).css(j)}),10);b+=c*i.a});this._timeout=setTimeout(l(this,"_show"),
h)},v=q?r?s:k:n;n=function(){var a={opacity:0};a[this.options.direction]=0;var b=l(this,"_hide"),c=this.element.children().size();this.element.children().stop().animate(a,this.animationDuration,function(){g(this).css("display","none");--c==0&&b()})};k=function(){this.element.children().stop();var a=l(this,"_hide"),b=this.element.children().size();this.element.children().animate({rotate:0,opacity:0},this.animationDuration,function(){g(this).css("display","none");--b==0&&a()})};s=function(){clearTimeout(this._timeout);
var a=this.animationDuration/1E3+"s";a={transition:"transform "+a+", opacity "+a,MozTransition:"-moz-transform "+a+", opacity "+a,WebkitTransition:"-webkit-transform "+a+", opacity "+a,OTransition:"-o-transform "+a+", opacity "+a};this.element.children().css(a);setTimeout(l(this,function(){this.element.children().css({opacity:0,transform:"rotate(0deg) translate(0,0)",MozTransform:"rotate(0deg) translate(0,0)",WebkitTransform:"rotate(0deg) translate(0,0)",OTransform:"rotate(0deg) translate(0,0)"})}),
10);this._timeout=setTimeout(l(this,function(){this.element.children().css("display","none");this._hide()}),this.animationDuration)};var w=q?r?s:k:n;g.widget("ui.stackmenu",{_init:function(){this.element.addClass("ui-stackmenu");this.element.children().addClass("ui-stackmenu-item").css({opacity:0,display:"none"}).css(this.options.direction,0);this.animationStartTime=this.isShowing=false;this.animationDuration=this.options.time;this._showCallbackFn=this._hideCallbackFn=p;t.call(this)},show:function(a){this.toggle(true,
a)},hide:function(a){this.toggle(false,a)},toggle:function(a,b){if(this.options.disabled!=true){if(g.isFunction(a)){b=a;a=void 0}var c=a===void 0?!this.isShowing:a;b=g.isFunction(b)?b:p;if(c!=this.isShowing){this._showCallbackFn=this._hideCallbackFn=p;if(this.animationStartTime===false)this.animationDuration=this.options.time;else{var h=(new Date).getMilliseconds()-this.animationStartTime;this.animationDuration=h=h>this.options.time?this.options.time:h}try{if(c){this._trigger("showBefore",{},[this.element.get(0)]);
this._showCallbackFn=b;v.call(this)}else{this._trigger("hideBefore",{},[this.element.get(0)]);this._hideCallbackFn=b;w.call(this)}}catch(d){}this.isShowing=c}}},destroy:function(){this.element.removeClass("ui-stackmenu");this.element.children().removeClass("ui-stackmenu-item").css({opacity:"",display:"",top:"",right:"",bottom:"",left:"",transformOrigin:"",MozTransformOrigin:"",OTransformOrigin:"",WebkitTransformOrigin:"",transform:"",MozTransform:"",OTransform:"",WebkitTransform:"",transition:"",
MozTransition:"",WebkitTransition:"",OTransition:""});g.widget.prototype.destroy.apply(this,arguments)},option:function(a,b){if(b===void 0)return g.widget.prototype.option.apply(this,arguments);if(this.options[a]!==b){if(a in{direction:"",clockwise:"",radius:""}){if(a=="direction"&&!(b in{top:"",right:"",bottom:"",left:""}))return;var c=l(this,t);if(this.isShowing){var h=l(this,"show"),d=l(this,function(){this.options[a]=b});this.hide(function(){d();c();setTimeout(h,10)})}else{this.options[a]=b;c()}return b}if(a==
"time")this.options.time=b;else return g.widget.prototype.option.apply(this,arguments)}},_show:function(){this.animationStartTime=false;this._call_callbacks("show")},_hide:function(){this.animationStartTime=false;this._call_callbacks("hide")},_call_callbacks:function(a){try{if(this["_"+a+"CallbackFn"]){var b=g.Event({});b.type=this.widgetEventPrefix+a;this["_"+a+"CallbackFn"].call(this.element.get(0),b,this.element.get(0))}}catch(c){}this._trigger(a,{},this.element.get(0))}});g.extend(g.ui.stackmenu,
{defaults:{direction:"top",clockwise:true,radius:"1000px",time:500}})})(jQuery);
