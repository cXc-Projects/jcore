/*
 CC Attribution-No Derivative Works 2.5 Brazil - http://creativecommons.org/licenses/by-nd/2.5/br/deed.en_US
 @example Visit http://leandrovieira.com/projects/jquery/lightbox/ for more informations about this jQuery plugin
*/
(function(b){b.fn.lightBox=function(a){function i(){if(a.activeImage==a.imageArray.length-1)a.activeImage=-1;a.activeImage+=1;e()}function p(){b("body").append('<div id="jquery-overlay"></div><div id="jquery-lightbox"><div id="lightbox-container-image-box" style="z-index: 101"><div id="lightbox-container-image">'+(a.ajaxContent?'<div id="lightbox-image"></div>':'<img id="lightbox-image" />')+'<div style="" id="lightbox-nav"><a href="javascript://" id="lightbox-nav-btnPrev" title="Prev"></a><a href="javascript://" id="lightbox-nav-btnNext" title="Next"></a></div><div id="lightbox-loading"><a href="javascript://" id="lightbox-loading-link"></a></div></div></div><div id="lightbox-container-image-data-box"><a href="javascript://" id="lightbox-secNav-btnSlideshow"'+
(a.slideShow?' class="pause"':"")+' title="Slideshow"></a><a href="javascript://" id="lightbox-secNav-btnClose" title="Close"></a><a href="javascript://" id="lightbox-secNav-btnDownload" title="Download"></a><a href="javascript://" id="lightbox-secNav-btnNext" title="Next"></a><a href="javascript://" id="lightbox-secNav-btnPrev" title="Prev"></a><div id="lightbox-container-image-data"><div id="lightbox-image-details"><span id="lightbox-image-details-caption"></span><span id="lightbox-image-details-currentNumber"></span></div></div></div></div>');
if(b("#lightbox-container-image-box").css("border-top-style")=="none")a.containerBorderSize=10;var d=j();b("#jquery-overlay").css({backgroundColor:a.overlayBgColor,opacity:a.overlayOpacity,width:d[0],height:d[1]}).fadeIn();var c=k();b("#jquery-lightbox").css({top:c[1]+d[3]/10,left:c[0]}).show();b("#jquery-overlay,#jquery-lightbox").click(function(a){a.target===this&&h()});a.disableSlideShow||b("#lightbox-secNav-btnSlideshow").click(function(){a.slideShow?(b(this).removeClass("pause"),clearTimeout(a.slideShow),
a.slideShow=0):(b(this).addClass("pause"),a.slideShow=setTimeout(function(){i()},a.slideShowTimeOut));return false});a.disableDownload||b("#lightbox-secNav-btnDownload").click(function(){picsrc=b("#lightbox-image").attr("src").replace(/view=/,"download=");picsrc.indexOf("download=")!=-1?window.location=picsrc:window.open(picsrc);return false});b("#lightbox-loading-link,#lightbox-secNav-btnClose").click(function(){h();return false});b(window).resize(function(){var a=j();b("#jquery-overlay").css({width:a[0],
height:a[1]});var c=k();b("#jquery-lightbox").css({top:c[1]+a[3]/10,left:c[0]})})}function e(d){b("#lightbox-nav-btnNext,#lightbox-nav-btnPrev,#lightbox-secNav-btnNext,#lightbox-secNav-btnPrev").css("display","none");a.slideShow||b("#lightbox-loading").show();!a.ajaxContent&&!a.containerBorderSize&&!d&&b("#lightbox-image").clone(false).attr("id","lightbox-tmp-image").prependTo("#lightbox-container-image");b("#lightbox-image,#lightbox-container-image-data-box,#lightbox-image-details-currentNumber").hide();
if(a.ajaxContent)url=a.imageArray[a.activeImage][0],url.indexOf("ajax=")==-1&&(url+=url.indexOf("?")==-1?"?ajax=1":"&ajax=1"),b.get(url,function(a){jc=b("#lightbox-image").html(a).jCore();m(jc.width(),jc.height())});else{var c=new Image;c.onload=function(){b("#lightbox-image").attr("src",a.imageArray[a.activeImage][0]);if(a.maximumImageWidth&&c.width>a.maximumImageWidth)widthpercent=a.maximumImageWidth*100/c.width,c.width=a.maximumImageWidth,c.height=widthpercent*c.height/100;b("#lightbox-image").attr("width",
c.width);b("#lightbox-image").attr("height",c.height);b("#lightbox-image").css({position:"absolute",left:"50%","margin-left":"-"+c.width/2+"px"});m(c.width,c.height);c.onload=function(){}};if(a.imageArray[a.activeImage])c.src=a.imageArray[a.activeImage][0]}}function m(d,c){var f=b("#lightbox-container-image-box").width(),l=b("#lightbox-container-image-box").height(),e=d+a.containerBorderSize*2,g=c+a.containerBorderSize*2;f-=e;l-=g;!a.ajaxContent&&!a.containerBorderSize&&n();b("#lightbox-container-image-box").animate({width:e,
height:g},a.containerResizeSpeed,function(){(a.ajaxContent||a.containerBorderSize)&&n()});f==0&&l==0&&(b.browser.msie?o(250):o(100));b("#lightbox-container-image-data-box").css({width:d});a.fixedNavigation||b("#lightbox-nav-btnPrev,#lightbox-nav-btnNext").css({height:c+a.containerBorderSize*2})}function n(){b("#lightbox-loading").hide();b("#lightbox-image").fadeIn(function(){b("#lightbox-tmp-image").remove();if(!a.hideDetails){b("#lightbox-container-image-data-box").slideDown("fast");b("#lightbox-image-details-caption").hide();
if(a.disableSlideShow||a.imageArray.length<=1)b("#lightbox-secNav-btnSlideshow").hide(),b("#lightbox-container-image-data").css("padding-left","0");a.disableDownload&&b("#lightbox-secNav-btnDownload").hide();a.imageArray[a.activeImage][1]&&b("#lightbox-image-details-caption").html(a.imageArray[a.activeImage][1]).show();a.imageArray.length>1&&b("#lightbox-image-details-currentNumber").html(a.txtImage+" "+(a.activeImage+1)+" "+a.txtOf+" "+a.imageArray.length).show()}a.disableNavigation||q();if(!a.disableSlideShow&&
a.slideShow)clearTimeout(a.slideShow),a.slideShow=!a.slideShowRepeat&&a.activeImage==a.imageArray.length-1?setTimeout(function(){h()},a.slideShowTimeOut):setTimeout(function(){i()},a.slideShowTimeOut)});if(a.slideShow){if(a.imageArray.length-1>a.activeImage)objNext=new Image,objNext.src=a.imageArray[a.activeImage+1][0];if(a.activeImage>0)objPrev=new Image,objPrev.src=a.imageArray[a.activeImage-1][0]}}function q(){a.fixedNavigation?b("#lightbox-nav").css("display","none"):(b("#lightbox-nav").show(),
b("#lightbox-secNav-btnPrev,#lightbox-secNav-btnNext").css("display","none"));a.imageArray.length<=1||(navb=a.fixedNavigation?"#lightbox-secNav-btnPrev":"#lightbox-nav-btnPrev",b(navb).css("display","block"),b(navb).unbind().bind("click",function(){a.activeImage!=0?a.activeImage-=1:a.activeImage=a.imageArray.length-1;e();return false}),navb=a.fixedNavigation?"#lightbox-secNav-btnNext":"#lightbox-nav-btnNext",b(navb).css("display","block"),b(navb).unbind().bind("click",function(){a.activeImage!=a.imageArray.length-
1?a.activeImage+=1:a.activeImage=0;e();return false}),r())}function r(){b(document).keydown(function(d){d==null?(keycode=event.keyCode,escapeKey=27):(keycode=d.keyCode,escapeKey=d.DOM_VK_ESCAPE);key=String.fromCharCode(keycode).toLowerCase();(key==a.keyToClose||key=="x"||keycode==escapeKey)&&h();if((key==a.keyToPrev||keycode==37)&&a.activeImage!=0)a.activeImage-=1,e(),b(document).unbind();if((key==a.keyToNext||keycode==39)&&a.activeImage!=a.imageArray.length-1)a.activeImage+=1,e(),b(document).unbind()})}
function h(){if(a.slideShow)clearTimeout(a.slideShow),a.slideShow=0;b("#jquery-lightbox").remove();b("#jquery-overlay").fadeOut(function(){b("#jquery-overlay").remove()});b("embed, object, select").css({visibility:"visible"})}function j(){var a,b;window.innerHeight&&window.scrollMaxY?(a=window.innerWidth+window.scrollMaxX,b=window.innerHeight+window.scrollMaxY):document.body.scrollHeight>document.body.offsetHeight?(a=document.body.scrollWidth,b=document.body.scrollHeight):(a=document.body.offsetWidth,
b=document.body.offsetHeight);var f,e;if(self.innerHeight)f=document.documentElement.clientWidth?document.documentElement.clientWidth:self.innerWidth,e=self.innerHeight;else if(document.documentElement&&document.documentElement.clientHeight)f=document.documentElement.clientWidth,e=document.documentElement.clientHeight;else if(document.body)f=document.body.clientWidth,e=document.body.clientHeight;pageHeight=b<e?e:b;pageWidth=a<f?a:f;return arrayPageSize=[pageWidth,pageHeight,f,e]}function k(){var a,
b;if(self.pageYOffset)b=self.pageYOffset,a=self.pageXOffset;else if(document.documentElement&&document.documentElement.scrollTop)b=document.documentElement.scrollTop,a=document.documentElement.scrollLeft;else if(document.body)b=document.body.scrollTop,a=document.body.scrollLeft;return arrayPageScroll=[a,b]}function o(a){var b=new Date;do var e=new Date;while(e-b<a)}var a=b.extend({ajaxContent:false,hideDetails:false,slideShow:0,slideShowTimeOut:5E3,slideShowRepeat:true,disableSlideShow:false,overlayBgColor:"#000",
overlayOpacity:0.8,fixedNavigation:false,disableNavigation:false,disableDownload:false,maximumImageWidth:960,containerBorderSize:0,containerResizeSpeed:400,txtImage:"Image",txtOf:"of",keyToClose:"c",keyToPrev:"p",keyToNext:"n",imageArray:[],activeImage:0},a),g=this;return this.unbind("click").click(function(){b("embed, object, select").css({visibility:"hidden"});p();a.imageArray.length=0;a.activeImage=0;if(g.length==1){var d=this.getAttribute("title");if(!d||d=="")d=this.getAttribute("original-title");
a.imageArray.push([this.getAttribute("href"),d])}else for(var c=0;c<g.length;c++){d=g[c].getAttribute("title");if(!d||d=="")d=g[c].getAttribute("original-title");a.imageArray.push([g[c].getAttribute("href"),d])}for(;a.imageArray[a.activeImage][0]!=this.getAttribute("href");)a.activeImage++;e(true);return false})}})(jQuery);
