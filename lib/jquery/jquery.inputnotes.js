(function(a){a.fn.inputNotes=function(d){function h(){var j=f.val(),k=[],c;for(c in d){var b=d[c],i=g+" #note_"+c;if(b.inversedBehavior!=true)b.inversedBehavior=false;if(!b.inversedBehavior&&j.match(b.pattern)||b.inversedBehavior&&!j.match(b.pattern)){if(a(i).size()==0){a(g).append("<"+e.noteTag+' id="note_'+c+'" class="'+b.type+'">'+b.text+"</"+e.noteTag+">");a(g).is(":hidden")&&a(g).show();a(f).trigger("inputnote_added",{note:c});typeof b.addCallback=="function"&&b.addCallback.call(f,c,b.type);
a(i).hide().slideDown("fast")}}else if(a(i).size()>0)k[c]=true}for(c in k){b=d[c];i=g+" #note_"+c;a(f).trigger("inputnote_removed",{note:c});typeof b.removeCallback=="function"&&b.removeCallback.call(f,c,b.type);a(i).slideUp("fast",function(){a(i).remove();a(g).html()==""&&a(g).hide()})}}var f=this,e=d.config==undefined?{}:d.config;delete d.config;if(e.containerTag==""||e.containerTag==undefined)e.containerTag="div";if(e.noteTag==""||e.noteTag==undefined)e.noteTag="div";var l="<"+e.containerTag+' id="'+
this.attr("id")+'_inputnotes" class="inputnotes"></'+e.containerTag+">";e.notePosition=="before"?f.before(l):f.after(l);var g="#"+f.attr("id")+"_inputnotes";a(g).hide();a("#"+f.attr("id")+"_inputnotes").css({width:f.outerWidth()});h();this.keyup(function(){h()});return this};a.fn.hasInputNotes=function(d){if(a(this).is("form")){var h=false;a(this).find("input, textarea").each(function(){if(a(this).attr("id"))if(d!=undefined){if(a("#"+a(this).attr("id")+"_inputnotes div."+d).size()>0)h=true}else if(a("#"+
a(this).attr("id")+"_inputnotes div").size()>0)h=true});return h}else return d!=undefined?a("#"+this.attr("id")+"_inputnotes div."+d).size()>0?true:false:a("#"+this.attr("id")+"_inputnotes div").size()>0?true:false}})(jQuery);
