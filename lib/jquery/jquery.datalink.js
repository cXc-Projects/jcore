(function(d,r){function p(a){a=d.data(a);var b;return(a._getLinks||(b={s:[],t:[]},a._getLinks=function(){return b}))()}function s(a,b,f){b.bind(a.nodeType?"change":q,f)}function m(a,b,f){b.unbind(a.nodeType?"change":q,f)}function t(a,b,f,c){var e=a.target,j=a.type===q,i;if(j){b=b;if(a.namespace)b+="."+a.namespace}else b=e.name||e.id;if(c){i=c[b];if(!i)return null;a=i.name;i=i.convert;if(typeof i==="string")i=d.convertFn[i]}else a=b;return{name:a,convert:i,value:j?f:d(e).val()}}var w=d.cleanData,x=
{val:"val",html:"html",text:"text"},q="changeField";d.extend({cleanData:function(a){for(var b=0,f;(f=a[b])!=null;b++){var c=d.data(f,"_getLinks");if(c){c=c();var e=d(f);d.each(c.s,function(){m(f,e,this.handler);this.handlerRev&&m(this.target,d(this.target),this.handlerRev)});d.each(c.t,function(){m(this.source,d(this.source),this.handler);this.handlerRev&&m(f,e,this.handlerRev)});c.s=[];c.t=[]}}w(a)},convertFn:{"!":function(a){return!a}},setField:function(a,b,f){if(a.nodeType){b=x[b]||"attr";d(a)[b](f)}else{var c=
b.split(".");c[1]=c[1]?"."+c[1]:"";var e=d(a),j=[c[0],f];e.triggerHandler("setField"+c[1]+"!",j);if(f!==r)a[b]=f;e.triggerHandler(q+c[1]+"!",j)}}});d.extend(d.fn,{link:function(a,b){function f(g){g="[name="+g+"], [id="+g+"]";return c.filter(g).add(c.find(g))}var c=this;if(!a)return c;if(typeof a==="string")a=d(a,this.context||null)[0];var e=!b,j,i,u=function(g,k,h){var l=t(g,k,h,j);if(l){k=l.name;h=l.value;if(l=l.convert)h=l(h,g.target,a);h!==r&&d.setField(a,k,h)}},v=function(g,k,h){if(g=t(g,k,h,
i)){var l=g.value,n=g.convert;f(g.name).each(function(){h=l;if(n)h=n(h,a,this);h!==r&&d.setField(this,"val",h)})}};b&&d.each(b,function(g,k){var h=k,l,n,o;if(d.isPlainObject(k)){h=k.name||g;l=k.convert;n=k.convertBack;o=k.twoWay!==false;e|=o}else e=o=true;if(o){i=i||{};i[g]={name:h,convert:n}}j=j||{};j[h]={name:g,convert:l,twoWay:o}});c.each(function(){s(this,d(this),u);var g={handler:u,handlerRev:e?v:null,target:a,source:this};p(this).s.push(g);a.nodeType&&p(a).t.push(g)});e&&s(a,d(a),v);return c},
unlink:function(a){this.each(function(){for(var b=d(this),f=p(this).s,c=f.length-1;c>=0;c--){var e=f[c];if(e.target===a){m(this,b,e.handler);e.handlerRev&&m(e.target,d(e.target),e.handlerRev);f.splice(c,1);var j=p(e.target).t;e=d.inArray(e,j);e!==-1&&j.splice(e,1)}}})},setField:function(a,b){return this.each(function(){d.setField(this,a,b)})}})})(jQuery);
