(function(e){function p(d,e,a){return[d.a*e+d.c*a+d.e,d.b*e+d.d*a+d.f]}function q(d){d='<div class="debuglabel" style="left:'+d[0]+"px;top:"+d[1]+'px;"></div>';e("#debug").append(d)}function s(d,e){var a=d[0];if(!a||!a.ownerDocument)return null;var b=new m;if(a===a.ownerDocument.body){var c=jQuery.offset.bodyOffset(a),a=new m,a=a.translate(c.left,c.top);return b=b.multiply(a)}jQuery.offset.initialize();var c=a.offsetParent,i=a.ownerDocument,g,j=i.documentElement,k=i.body,n=e[0];g=(i=i.defaultView)?
i.getComputedStyle(a,null):a.currentStyle;for(var f=a.offsetTop,l=a.offsetLeft,f=r().translate(l,f),f=f.multiply(r(a)),b=f.multiply(b);(a=a.parentNode)&&a!==k&&a!==j&&a!==n;){l=f=0;if(jQuery.offset.supportsFixedPosition&&g.position==="fixed")break;g=i?i.getComputedStyle(a,null):a.currentStyle;f-=a.scrollTop;l-=a.scrollLeft;if(a===c){f+=a.offsetTop;l+=a.offsetLeft;if(jQuery.offset.doesNotAddBorder&&(!jQuery.offset.doesAddBorderForTableAndCells||!/^t(able|d|h)$/i.test(a.nodeName)))f+=parseFloat(g.borderTopWidth)||
0,l+=parseFloat(g.borderLeftWidth)||0;c=a.offsetParent}jQuery.offset.subtractsBorderForOverflowNotVisible&&g.overflow!=="visible"&&(f+=parseFloat(g.borderTopWidth)||0,l+=parseFloat(g.borderLeftWidth)||0);f=r().translate(l,f);f=f.multiply(r(a));b=f.multiply(b)}l=f=0;if(g.position==="relative"||g.position==="static")f+=k.offsetTop,l+=k.offsetLeft;jQuery.offset.supportsFixedPosition&&g.position==="fixed"&&(f+=Math.max(j.scrollTop,k.scrollTop),l+=Math.max(j.scrollLeft,k.scrollLeft));a=(new m).translate(l,
f);return b=b.multiply(a)}function r(d){return(d=e(d).css("-webkit-transform")||e(d).css("-moz-transform")||e(d).css("-o-transform")||e(d).css("-ms-transform")||e(d).css("transform"))?new m(d):new m}var m,o;e.zoomMooz={};e.zoomMooz.setup=function(d){o=jQuery.extend({targetsize:0.9,scalemode:"both",duration:1E3,easing:"ease",root:e(document.body),nativeanimation:!1},d);m=PureCSSMatrix};e.fn.debug=function(d){o||e.zoomMooz.setup();d=jQuery.extend(o,d);e("#debug").length===0?e(d.root).append('<div id="debug"><div>'):
e("#debug").html("");this.each(function(){if(e(this)[0]!=d.root[0]){var h=e(this),a=s(h,d.root);var b;if(a instanceof PureCSSMatrix)b=a.m.elements;else if(a instanceof Matrix)b=a.elements;a=b?{a:b[0][0],b:b[1][0],c:b[0][1],d:b[1][1],e:b[0][2],f:b[1][2]}:{a:a.a,b:a.b,c:a.c,d:a.d,e:a.e,f:a.f};q(p(a,0,0));q(p(a,0,h.outerHeight()));q(p(a,h.outerWidth(),h.outerHeight()));q(p(a,h.outerWidth(),0))}})};e.fn.zoomTo=function(d){o||e.zoomMooz.setup();d=jQuery.extend(o,d);this.each(function(){var h=e(this),a=
d,b=a.root,c;c=b[0]===document.body?e("html"):b;if(h[0]===b[0])c.removeClass("noScroll");else if(!c.hasClass("noScroll")){var i=b.scrollTop(),g=b.scrollLeft();i||(i=c.scrollTop(),g=c.scrollLeft());c.addClass("noScroll");b.scrollTop(0);b.scrollLeft(0);c="translate(-"+g+"px,-"+i+"px)";b.css("-ms-transform",c);b.css("-webkit-transform",c);b.css("-moz-transform",c);b.css("-o-transform",c)}if(h[0]===a.root[0])e(a.root).animateTransformation(new m,a,m);else{b=s(h,a.root);a:{var b=b?b.inverse():null,j=a.targetsize,
k=a.scalemode;c=a.root;var g=e(c).width(),i=e(c).height(),n=g/h.outerWidth(),f=i/h.outerHeight();if(k=="width")j*=n;else if(k=="height")j*=f;else if(k=="both")j*=Math.min(n,f);else{console.log("wrong zoommode");h=void 0;break a}k=(g-h.outerWidth()*j)/2;h=(i-h.outerHeight()*j)/2;g/=2;i/=2;n=Number(g).toFixed(6)+"px "+Number(i).toFixed(6)+"px";c.css("-ms-transform-origin",n);c.css("-webkit-transform-origin",n);c.css("-o-transform-origin",n);c.css("-moz-transform-origin",n);c=new m;c=c.translate(-g,
-i);c=c.translate(k,h);c=c.scale(j,j);b&&(c=c.multiply(b));h=c=c.translate(g,i)}e(a.root).animateTransformation(h,a,m)}});return this}})(jQuery);
