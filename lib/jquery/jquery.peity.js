(function(j,k){function l(g,a){var b=k.createElement("canvas");b.setAttribute("width",g);b.setAttribute("height",a);return b}var c=j.fn.peity=function(g,a){k.createElement("canvas").getContext&&this.each(function(){j(this).change(function(){var b=j(this).html();c.graphers[g](j(this),j.extend({},c.defaults[g],a));j(this).trigger("chart:changed",b)}).trigger("change")});return this};c.graphers={};c.defaults={};c.add=function(g,a,b){c.graphers[g]=b;c.defaults[g]=a};c.add("pie",{colours:["#FFF4DD","#FF9900"],
delimeter:"/",radius:16},function(g,a){var b=a.radius/2,i=g.text().split(a.delimeter),h=parseFloat(i[0]),c=parseFloat(i[1]),i=-Math.PI/2,h=h/c*Math.PI*2,c=l(a.radius,a.radius),d=c.getContext("2d");d.beginPath();d.moveTo(b,b);d.arc(b,b,b,0,Math.PI*2,!1);d.fillStyle=a.colours[0];d.fill();d.beginPath();d.moveTo(b,b);d.arc(b,b,b,i,h+i,!1);d.fillStyle=a.colours[1];d.fill();g.wrapInner(j("<span>").hide()).append(c)});c.add("line",{colour:"#c6d9fd",strokeColour:"#4d89f9",strokeWidth:1,delimeter:",",height:16,
max:null,width:32},function(g,a){var b=l(a.width,a.height),c=g.text().split(a.delimeter),h=Math.max.apply(Math,c.concat([a.max])),h=a.height/h,n=a.width/(c.length-1),d=[],e,f=b.getContext("2d");f.beginPath();f.moveTo(0,a.height);for(e=0;e<c.length;e++){var k=e*n,m=a.height-h*c[e];d.push({x:k,y:m});f.lineTo(k,m)}f.lineTo(a.width,a.height);f.fillStyle=a.colour;f.fill();f.beginPath();f.moveTo(0,d[0].y);for(e=0;e<d.length;e++)f.lineTo(d[e].x,d[e].y);f.lineWidth=a.strokeWidth;f.strokeStyle=a.strokeColour;
f.stroke();g.wrapInner(j("<span>").hide()).append(b)});c.add("bar",{colour:"#4D89F9",delimeter:",",height:16,max:null,width:32},function(c,a){var b=l(a.width,a.height),i=c.text().split(a.delimeter),h=Math.max.apply(Math,i.concat([a.max])),h=a.height/h,k=a.width/i.length,d=b.getContext("2d");d.fillStyle=a.colour;for(var e=0;e<i.length;e++){var f=h*i[e];d.fillRect(e*k,a.height-f,k,f)}c.wrapInner(j("<span>").hide()).append(b)})})(jQuery,document);
