(function(b){var c=[],l=[],f=[],m=[],p=[],n=[],r=[],d=[],s=[],h=[],q=[];b.fn.coinslider=b.fn.CoinSlider=function(t){init=function(a){l[a.id]=[];f[a.id]=[];m[a.id]=[];p[a.id]=[];n[a.id]=[];d[a.id]=0;h[a.id]=0;q[a.id]=1;c[a.id]=b.extend({},b.fn.coinslider.defaults,t);b.each(b("#"+a.id+" img"),function(c,e){f[a.id][c]=b(e).attr("src");m[a.id][c]=b(e).parent().is("a")?b(e).parent().attr("href"):"";p[a.id][c]=b(e).parent().is("a")?b(e).parent().attr("target"):"";n[a.id][c]=b(e).next().is("span")?b(e).next().html():
"";b(e).hide();b(e).next().hide()});b(a).css({"background-image":"url("+f[a.id][0]+")",width:c[a.id].width,height:c[a.id].height,position:"relative","background-position":"top left"}).wrap("<div class='coin-slider' id='coin-slider-"+a.id+"' />");b("#"+a.id).append("<div class='cs-title' id='cs-title-"+a.id+"' style='position: absolute; bottom:0; left: 0; z-index: 1000;'></div>");b.setFields(a);c[a.id].navigation&&b.setNavigation(a);b.transition(a,0);b.transitionCall(a)};b.setFields=function(a){tWidth=
sWidth=parseInt(c[a.id].width/c[a.id].spw);tHeight=sHeight=parseInt(c[a.id].height/c[a.id].sph);counter=sLeft=sTop=0;tgapx=gapx=c[a.id].width-c[a.id].spw*sWidth;tgapy=gapy=c[a.id].height-c[a.id].sph*sHeight;for(i=1;i<=c[a.id].sph;i++){gapx=tgapx;gapy>0?(gapy--,sHeight=tHeight+1):sHeight=tHeight;for(j=1;j<=c[a.id].spw;j++)gapx>0?(gapx--,sWidth=tWidth+1):sWidth=tWidth,l[a.id][counter]=i+""+j,counter++,c[a.id].links?b("#"+a.id).append("<a href='"+m[a.id][0]+"' class='cs-"+a.id+"' id='cs-"+a.id+i+j+"' style='width:"+
sWidth+"px; height:"+sHeight+"px; float: left; position: absolute;'></a>"):b("#"+a.id).append("<div class='cs-"+a.id+"' id='cs-"+a.id+i+j+"' style='width:"+sWidth+"px; height:"+sHeight+"px; float: left; position: absolute;'></div>"),b("#cs-"+a.id+i+j).css({"background-position":-sLeft+"px "+(-sTop+"px"),left:sLeft,top:sTop}),sLeft+=sWidth;sTop+=sHeight;sLeft=0}b(".cs-"+a.id).mouseover(function(){b("#cs-navigation-"+a.id).show()});b(".cs-"+a.id).mouseout(function(){b("#cs-navigation-"+a.id).hide()});
b("#cs-title-"+a.id).mouseover(function(){b("#cs-navigation-"+a.id).show()});b("#cs-title-"+a.id).mouseout(function(){b("#cs-navigation-"+a.id).hide()});c[a.id].hoverPause&&(b(".cs-"+a.id).mouseover(function(){c[a.id].pause=!0}),b(".cs-"+a.id).mouseout(function(){c[a.id].pause=!1}),b("#cs-title-"+a.id).mouseover(function(){c[a.id].pause=!0}),b("#cs-title-"+a.id).mouseout(function(){c[a.id].pause=!1}))};b.transitionCall=function(a){clearInterval(r[a.id]);delay=c[a.id].delay+c[a.id].spw*c[a.id].sph*
c[a.id].sDelay;r[a.id]=setInterval(function(){b.transition(a)},delay)};b.transition=function(a,g){c[a.id].pause!=!0&&(b.effect(a),h[a.id]=0,s[a.id]=setInterval(function(){b.appereance(a,l[a.id][h[a.id]])},c[a.id].sDelay),b(a).css({"background-image":"url("+f[a.id][d[a.id]]+")"}),typeof g=="undefined"?d[a.id]++:g=="prev"?d[a.id]--:d[a.id]=g,d[a.id]==f[a.id].length&&(d[a.id]=0),d[a.id]==-1&&(d[a.id]=f[a.id].length-1),b(".cs-button-"+a.id).removeClass("cs-active"),b("#cs-button-"+a.id+"-"+(d[a.id]+1)).addClass("cs-active"),
n[a.id][d[a.id]]?(b("#cs-title-"+a.id).css({opacity:0}).animate({opacity:c[a.id].opacity},c[a.id].titleSpeed),b("#cs-title-"+a.id).html(n[a.id][d[a.id]])):b("#cs-title-"+a.id).css("opacity",0))};b.appereance=function(a,g){b(".cs-"+a.id).attr("href",m[a.id][d[a.id]]).attr("target",p[a.id][d[a.id]]);h[a.id]==c[a.id].spw*c[a.id].sph?clearInterval(s[a.id]):(b("#cs-"+a.id+g).css({opacity:0,"background-image":"url("+f[a.id][d[a.id]]+")"}),b("#cs-"+a.id+g).animate({opacity:1},300),h[a.id]++)};b.setNavigation=
function(a){b(a).append("<div id='cs-navigation-"+a.id+"'></div>");b("#cs-navigation-"+a.id).hide();b("#cs-navigation-"+a.id).append("<a href='#' id='cs-prev-"+a.id+"' class='cs-prev'>prev</a>");b("#cs-navigation-"+a.id).append("<a href='#' id='cs-next-"+a.id+"' class='cs-next'>next</a>");b("#cs-prev-"+a.id).css({position:"absolute",top:c[a.id].height/2-15,left:0,"z-index":1001,"line-height":"30px",opacity:c[a.id].opacity}).click(function(c){c.preventDefault();b.transition(a,"prev");b.transitionCall(a)}).mouseover(function(){b("#cs-navigation-"+
a.id).show()});b("#cs-next-"+a.id).css({position:"absolute",top:c[a.id].height/2-15,right:0,"z-index":1001,"line-height":"30px",opacity:c[a.id].opacity}).click(function(c){c.preventDefault();b.transition(a);b.transitionCall(a)}).mouseover(function(){b("#cs-navigation-"+a.id).show()});b("<div id='cs-buttons-"+a.id+"' class='cs-buttons'></div>").appendTo(b("#coin-slider-"+a.id));for(k=1;k<f[a.id].length+1;k++)b("#cs-buttons-"+a.id).append("<a href='#' class='cs-button-"+a.id+"' id='cs-button-"+a.id+
"-"+k+"'>"+k+"</a>");b.each(b(".cs-button-"+a.id),function(c,e){b(e).click(function(e){b(".cs-button-"+a.id).removeClass("cs-active");b(this).addClass("cs-active");e.preventDefault();b.transition(a,c);b.transitionCall(a)})});b("#cs-navigation-"+a.id+" a").mouseout(function(){b("#cs-navigation-"+a.id).hide();c[a.id].pause=!1});b("#cs-buttons-"+a.id).css({left:"50%","margin-left":-f[a.id].length*15/2-5,position:"relative"})};b.effect=function(a){effA=["random","swirl","rain","straight"];eff=c[a.id].effect==
""?effA[Math.floor(Math.random()*effA.length)]:c[a.id].effect;l[a.id]=[];if(eff=="random"){counter=0;for(i=1;i<=c[a.id].sph;i++)for(j=1;j<=c[a.id].spw;j++)l[a.id][counter]=i+""+j,counter++;b.random(l[a.id])}eff=="rain"&&b.rain(a);eff=="swirl"&&b.swirl(a);eff=="straight"&&b.straight(a);q[a.id]*=-1;q[a.id]>0&&l[a.id].reverse()};b.random=function(a){var b=a.length;if(b==0)return!1;for(;--b;){var c=Math.floor(Math.random()*(b+1)),d=a[b];a[b]=a[c];a[c]=d}};b.swirl=function(a){for(var g=c[a.id].sph,e=c[a.id].spw,
d=1,o=1,f=0,h=0,m=0,n=!0;n;){h=f==0||f==2?e:g;for(i=1;i<=h;i++)if(l[a.id][m]=d+""+o,m++,i!=h)switch(f){case 0:o++;break;case 1:d++;break;case 2:o--;break;case 3:d--}f=(f+1)%4;switch(f){case 0:e--;o++;break;case 1:g--;d++;break;case 2:e--;o--;break;case 3:g--,d--}check=b.max(g,e)-b.min(g,e);e<=check&&g<=check&&(n=!1)}};b.rain=function(a){for(var b=c[a.id].sph,e=c[a.id].spw,d=0,f=to2=from=1,h=!0;h;){for(i=from;i<=f;i++)l[a.id][d]=i+""+parseInt(to2-i+1),d++;to2++;f<b&&to2<e&&b<e&&f++;f<b&&b>=e&&f++;
to2>e&&from++;from>f&&(h=!1)}};b.straight=function(a){counter=0;for(i=1;i<=c[a.id].sph;i++)for(j=1;j<=c[a.id].spw;j++)l[a.id][counter]=i+""+j,counter++};b.min=function(a,b){return a>b?b:a};b.max=function(a,b){return a<b?b:a};this.each(function(){init(this)})};b.fn.coinslider.defaults={width:565,height:290,spw:7,sph:5,delay:3E3,sDelay:30,opacity:0.7,titleSpeed:500,effect:"",navigation:!0,links:!0,hoverPause:!0}})(jQuery);
