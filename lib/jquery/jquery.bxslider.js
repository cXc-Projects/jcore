(function(e){e.fn.bxSlider=function(a){function S(){if(a.mode=="horizontal"||a.mode=="vertical"){var b=N(d,0,a.moveSlideQty,"backward");e.each(b,function(){g.prepend(e(this))});b=N(d,0,d.length+a.moveSlideQty-1-(d.length-a.displaySlideQty),"forward");a.infiniteLoop&&e.each(b,function(){g.append(e(this))})}}function T(){if(a.auto)if(a.infiniteLoop)if(a.autoDirection=="next")v=setInterval(function(){h.goToNextSlide(false)},a.pause);else{if(a.autoDirection=="prev")v=setInterval(function(){h.goToPreviousSlide(false)},
a.pause)}else if(a.autoDirection=="next")v=setInterval(function(){c+=a.moveSlideQty;if(c>w)c%=d.length;h.goToSlide(c,false)},a.pause);else{if(a.autoDirection=="prev")v=setInterval(function(){c-=a.moveSlideQty;if(c<0){negativeOffset=c%d.length;c=negativeOffset==0?0:d.length+negativeOffset}h.goToSlide(c,false)},a.pause)}else if(a.ticker){a.tickerSpeed*=10;e(".pager",i).each(function(){r+=e(this).width();s+=e(this).height()});if(a.tickerDirection=="prev"&&a.mode=="horizontal")g.css("left","-"+(r+A)+
"px");else a.tickerDirection=="prev"&&a.mode=="vertical"&&g.css("top","-"+(s+B)+"px");if(a.mode=="horizontal"){E=parseInt(g.css("left"));t(E,r,a.tickerSpeed)}else if(a.mode=="vertical"){F=parseInt(g.css("top"));t(F,s,a.tickerSpeed)}a.tickerHover&&U()}}function t(b,f,j){if(a.mode=="horizontal")if(a.tickerDirection=="next")g.animate({left:"-="+f+"px"},j,"linear",function(){g.css("left",b);t(b,r,a.tickerSpeed)});else a.tickerDirection=="prev"&&g.animate({left:"+="+f+"px"},j,"linear",function(){g.css("left",
b);t(b,r,a.tickerSpeed)});else if(a.mode=="vertical")if(a.tickerDirection=="next")g.animate({top:"-="+f+"px"},j,"linear",function(){g.css("top",b);t(b,s,a.tickerSpeed)});else a.tickerDirection=="prev"&&g.animate({top:"+="+f+"px"},j,"linear",function(){g.css("top",b);t(b,s,a.tickerSpeed)})}function V(){i.find(".bx-window").hover(function(){n&&h.stopShow(false)},function(){n&&h.startShow(false)})}function U(){g.hover(function(){n&&h.stopTicker(false)},function(){n&&h.startTicker(false)})}function L(){d.not(":eq("+
c+")").fadeTo(a.speed,0).css("zIndex",98);d.eq(c).css("zIndex",99).fadeTo(a.speed,1,function(){k=false;a.onAfterSlide(c,d.length,d.eq(c))})}function x(b){if(a.pagerType=="full"&&a.pager){e("a",u).removeClass(a.pagerActiveClass);e("a",u).eq(b).addClass(a.pagerActiveClass)}else a.pagerType=="short"&&a.pager&&e(".bx-pager-current",u).html(c+1)}function W(b,f,j,l){var o=e('<a href="" class="bx-next"></a>'),m=e('<a href="" class="bx-prev"></a>');b=="text"?o.html(f):o.html('<img src="'+f+'" />');j=="text"?
m.html(l):m.html('<img src="'+l+'" />');a.prevSelector?e(a.prevSelector).append(m):i.append(m);a.nextSelector?e(a.nextSelector).append(o):i.append(o);o.click(function(){h.goToNextSlide();return false});m.click(function(){h.goToPreviousSlide();return false})}function O(b){var f=d.length;if(a.moveSlideQty>1)f=d.length%a.moveSlideQty!=0?Math.ceil(d.length/a.moveSlideQty):d.length/a.moveSlideQty;var j="";if(a.buildPager)for(b=0;b<f;b++)j+=a.buildPager(b,d.eq(b*a.moveSlideQty));else if(b=="full")for(b=
1;b<=f;b++)j+='<a href="" class="pager-link pager-'+b+'">'+b+"</a>";else if(b=="short")j='<span class="bx-pager-current">'+(a.startingSlide+1)+"</span> "+a.pagerShortSeparator+' <span class="bx-pager-total">'+d.length+"<span>";if(a.pagerSelector){e(a.pagerSelector).append(j);u=e(a.pagerSelector)}else{f=e('<div class="bx-pager"></div>');f.append(j);if(a.pagerLocation=="top")i.prepend(f);else a.pagerLocation=="bottom"&&i.append(f);u=e(".bx-pager",i)}u.children().click(function(){if(a.pagerType=="full"){var l=
u.children().index(this);if(a.moveSlideQty>1)l*=a.moveSlideQty;h.goToSlide(l)}return false})}function G(){var b=e("img",d.eq(c)).attr("title");if(b!="")a.captionsSelector?e(a.captionsSelector).html(b):e(".bx-captions",i).html(b);else a.captionsSelector?e(a.captionsSelector).html("&nbsp;"):e(".bx-captions",i).html("&nbsp;")}function X(b,f,j,l){p=e('<a href="" class="bx-start"></a>');H=b=="text"?f:'<img src="'+f+'" />';I=j=="text"?l:'<img src="'+l+'" />';if(a.autoControlsSelector)e(a.autoControlsSelector).append(p);
else{i.append('<div class="bx-auto"></div>');e(".bx-auto",i).html(p)}p.click(function(){if(a.ticker)if(e(this).hasClass("stop"))h.stopTicker();else e(this).hasClass("start")&&h.startTicker();else if(e(this).hasClass("stop"))h.stopShow(true);else e(this).hasClass("start")&&h.startShow(true);return false})}function J(){if(!a.infiniteLoop&&a.hideControlOnEnd){c==K?e(".bx-prev",i).hide():e(".bx-prev",i).show();c==w?e(".bx-next",i).hide():e(".bx-next",i).show()}}function z(b,f){if(f=="left")var j=e(".pager",
i).eq(b).position().left;else if(f=="top")j=e(".pager",i).eq(b).position().top;return j}function N(b,f,j,l){var o=[],m=j,P=false;if(l=="backward"){b=e.makeArray(b);b.reverse()}for(;m>0;)e.each(b,function(Y){if(m>0)if(P){o.push(e(this).clone());m--}else{if(Y==f){P=true;o.push(e(this).clone());m--}}else return false});return o}a=e.extend({mode:"horizontal",infiniteLoop:true,hideControlOnEnd:false,controls:true,speed:500,easing:"swing",pager:false,pagerSelector:null,pagerType:"full",pagerLocation:"bottom",
pagerShortSeparator:"/",pagerActiveClass:"pager-active",nextText:"next",nextImage:"",nextSelector:null,prevText:"prev",prevImage:"",prevSelector:null,captions:false,captionsSelector:null,auto:false,autoDirection:"next",autoControls:false,autoControlsSelector:null,autoStart:true,autoHover:false,autoDelay:0,pause:3E3,startText:"start",startImage:"",stopText:"stop",stopImage:"",ticker:false,tickerSpeed:5E3,tickerDirection:"next",tickerHover:false,wrapperClass:"bx-wrapper",startingSlide:0,displaySlideQty:1,
moveSlideQty:1,randomStart:false,onBeforeSlide:function(){},onAfterSlide:function(){},onLastSlide:function(){},onFirstSlide:function(){},onNextSlide:function(){},onPrevSlide:function(){},buildPager:null},a);var h=this,g="",d="",i="",C="",Q="",D="",M="",R="",u="",v="",p="",H="",I="",n=true,y=0,q=0,c=0,A=0,B=0,r=0,s=0,E=0,F=0,k=false,K=0,w=d.length-1;this.goToSlide=function(b,f){if(!k){k=true;c=b;a.onBeforeSlide(c,d.length,d.eq(c));if(typeof f=="undefined")f=true;f&&a.auto&&h.stopShow(true);slide=b;
slide==K&&a.onFirstSlide(c,d.length,d.eq(c));slide==w&&a.onLastSlide(c,d.length,d.eq(c));if(a.mode=="horizontal")g.animate({left:"-"+z(slide,"left")+"px"},a.speed,a.easing,function(){k=false;a.onAfterSlide(c,d.length,d.eq(c))});else if(a.mode=="vertical")g.animate({top:"-"+z(slide,"top")+"px"},a.speed,a.easing,function(){k=false;a.onAfterSlide(c,d.length,d.eq(c))});else a.mode=="fade"&&L();J();if(a.moveSlideQty>1)b=Math.floor(b/a.moveSlideQty);x(b);G()}};this.goToNextSlide=function(b){if(typeof b==
"undefined")b=true;b&&a.auto&&h.stopShow(true);if(a.infiniteLoop){if(!k){k=true;f=false;c+=a.moveSlideQty;if(c>w){c%=d.length;f=true}a.onNextSlide(c,d.length,d.eq(c));a.onBeforeSlide(c,d.length,d.eq(c));if(a.mode=="horizontal")g.animate({left:"-="+a.moveSlideQty*D+"px"},a.speed,a.easing,function(){k=false;f&&g.css("left","-"+z(c,"left")+"px");a.onAfterSlide(c,d.length,d.eq(c))});else if(a.mode=="vertical")g.animate({top:"-="+a.moveSlideQty*q+"px"},a.speed,a.easing,function(){k=false;f&&g.css("top",
"-"+z(c,"top")+"px");a.onAfterSlide(c,d.length,d.eq(c))});else a.mode=="fade"&&L();a.moveSlideQty>1?x(Math.ceil(c/a.moveSlideQty)):x(c);G()}}else if(!k){var f=false;c+=a.moveSlideQty;if(c<=w){J();a.onNextSlide(c,d.length,d.eq(c));h.goToSlide(c)}else c-=a.moveSlideQty}};this.goToPreviousSlide=function(b){if(typeof b=="undefined")b=true;b&&a.auto&&h.stopShow(true);if(a.infiniteLoop){if(!k){k=true;f=false;c-=a.moveSlideQty;if(c<0){negativeOffset=c%d.length;c=negativeOffset==0?0:d.length+negativeOffset;
f=true}a.onPrevSlide(c,d.length,d.eq(c));a.onBeforeSlide(c,d.length,d.eq(c));if(a.mode=="horizontal")g.animate({left:"+="+a.moveSlideQty*D+"px"},a.speed,a.easing,function(){k=false;f&&g.css("left","-"+z(c,"left")+"px");a.onAfterSlide(c,d.length,d.eq(c))});else if(a.mode=="vertical")g.animate({top:"+="+a.moveSlideQty*q+"px"},a.speed,a.easing,function(){k=false;f&&g.css("top","-"+z(c,"top")+"px");a.onAfterSlide(c,d.length,d.eq(c))});else a.mode=="fade"&&L();a.moveSlideQty>1?x(Math.ceil(c/a.moveSlideQty)):
x(c);G()}}else if(!k){var f=false;c-=a.moveSlideQty;if(c<0){c=0;a.hideControlOnEnd&&e(".bx-prev",i).hide()}J();a.onPrevSlide(c,d.length,d.eq(c));h.goToSlide(c)}};this.goToFirstSlide=function(b){if(typeof b=="undefined")b=true;h.goToSlide(K,b)};this.goToLastSlide=function(){if(typeof b=="undefined")var b=true;h.goToSlide(w,b)};this.getCurrentSlide=function(){return c};this.getSlideCount=function(){return d.length};this.stopShow=function(b){clearInterval(v);if(typeof b=="undefined")b=true;if(b&&a.autoControls){p.html(H).removeClass("stop").addClass("start");
n=false}};this.startShow=function(b){if(typeof b=="undefined")b=true;T();if(b&&a.autoControls){p.html(I).removeClass("start").addClass("stop");n=true}};this.stopTicker=function(b){g.stop();if(typeof b=="undefined")b=true;if(b&&a.ticker){p.html(H).removeClass("stop").addClass("start");n=false}};this.startTicker=function(b){if(a.mode=="horizontal"){if(a.tickerDirection=="next"){b=parseInt(g.css("left"));var f=r+b+d.eq(0).width()}else if(a.tickerDirection=="prev"){b=-parseInt(g.css("left"));f=b-d.eq(0).width()}var j=
f*a.tickerSpeed/r;t(E,f,j)}else if(a.mode=="vertical"){if(a.tickerDirection=="next"){f=parseInt(g.css("top"));f=s+f+d.eq(0).height()}else if(a.tickerDirection=="prev"){f=-parseInt(g.css("top"));f=f-d.eq(0).height()}j=f*a.tickerSpeed/s;t(F,f,j);if(typeof b=="undefined")b=true;if(b&&a.ticker){p.html(I).removeClass("start").addClass("stop");n=true}}};this.initShow=function(){g=e(this);g.clone();d=g.children();i="";C=g.children(":first");Q=C.width();y=0;D=C.outerWidth();q=0;M=C.outerWidth()*a.displaySlideQty;
R=C.outerHeight()*a.displaySlideQty;k=false;u="";B=A=c=0;I=H=p=v="";n=true;K=F=E=s=r=0;w=d.length-1;d.each(function(){if(e(this).outerHeight()>q)q=e(this).outerHeight();if(e(this).outerWidth()>y)y=e(this).outerWidth()});if(a.randomStart){var b=Math.floor(Math.random()*d.length);c=b;A=D*(a.moveSlideQty+b);B=q*(a.moveSlideQty+b)}else{c=a.startingSlide;A=D*(a.moveSlideQty+a.startingSlide);B=q*(a.moveSlideQty+a.startingSlide)}S(a.startingSlide);if(a.mode=="horizontal"){g.wrap('<div class="'+a.wrapperClass+
'" style="width:'+M+'px; position:relative;"></div>').wrap('<div class="bx-window" style="position:relative; overflow:hidden; width:'+M+'px;"></div>').css({width:"99999px",position:"relative",left:"-"+A+"px"});g.children().css({width:Q,"float":"left",listStyle:"none"});i=g.parent().parent();d.addClass("pager")}else if(a.mode=="vertical"){g.wrap('<div class="'+a.wrapperClass+'" style="width:'+y+'px; position:relative;"></div>').wrap('<div class="bx-window" style="width:'+y+"px; height:"+R+'px; position:relative; overflow:hidden;"></div>').css({height:"99999px",
position:"relative",top:"-"+B+"px"});g.children().css({listStyle:"none",height:q});i=g.parent().parent();d.addClass("pager")}else if(a.mode=="fade"){g.wrap('<div class="'+a.wrapperClass+'" style="width:'+y+'px; position:relative;"></div>').wrap('<div class="bx-window" style="height:'+q+"px; width:"+y+'px; position:relative; overflow:hidden;"></div>');g.children().css({listStyle:"none",position:"absolute",top:0,left:0,zIndex:98});i=g.parent().parent();d.not(":eq("+c+")").fadeTo(0,0);d.eq(c).css("zIndex",
99)}a.captions&&a.captionsSelector==null&&i.append('<div class="bx-captions"></div>');if(a.pager&&!a.ticker)if(a.pagerType=="full")O("full");else a.pagerType=="short"&&O("short");if(a.controls&&!a.ticker){if(a.nextImage!=""){nextContent=a.nextImage;nextType="image"}else{nextContent=a.nextText;nextType="text"}if(a.prevImage!=""){prevContent=a.prevImage;prevType="image"}else{prevContent=a.prevText;prevType="text"}W(nextType,nextContent,prevType,prevContent)}if(a.auto||a.ticker){if(a.autoControls){if(a.startImage!=
""){startContent=a.startImage;startType="image"}else{startContent=a.startText;startType="text"}if(a.stopImage!=""){stopContent=a.stopImage;stopType="image"}else{stopContent=a.stopText;stopType="text"}X(startType,startContent,stopType,stopContent)}a.autoStart?setTimeout(function(){h.startShow(true)},a.autoDelay):h.stopShow(true);a.autoHover&&!a.ticker&&V()}a.moveSlideQty>1?x(Math.ceil(c/a.moveSlideQty)):x(c);J();a.captions&&G();a.onAfterSlide(c,d.length,d.eq(c))};this.destroyShow=function(){clearInterval(v);
e(".bx-next, .bx-prev, .bx-pager, .bx-auto",i).remove();g.unwrap().unwrap().removeAttr("style");g.children().removeAttr("style").not(".pager").remove();d.removeClass("pager")};this.reloadShow=function(){h.destroyShow();h.initShow()};this.each(function(){h.initShow()});return this}})(jQuery);
