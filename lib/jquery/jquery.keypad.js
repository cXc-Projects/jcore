document.write("<style type='text/css'>#keypad-div {\tpadding: 5px;\tdisplay: none;\tz-index: 10;}.keypad-row {\tclear: both;\twhite-space: nowrap;}.keypad-space {\tfloat: left;\tmargin: 2px;\twidth: 24px;}.keypad-half-space {\tfloat: left;\tmargin: 1px;\twidth: 12px;}.keypad-key {\tfloat: left;\tmargin: 2px;\tpadding: 0px;\twidth: 24px;\ttext-align: center;\tcursor: pointer;\tfont-size: 12px;}.keypad-spacebar {\twidth: 164px;}.keypad-clear, .keypad-back, .keypad-close, .keypad-shift, .keypad-enter {\twidth: 52px;\tfont-weight: bold;}\t</style>");
(function(c){function q(){this._curInst=null;this._disabledFields=[];this._keypadShowing=false;this._keyCode=0;this._specialKeys=[];this.addKeyDef("CLOSE","close",function(a){c.keypad._curInst=a._inline?a:c.keypad._curInst;c.keypad._hideKeypad()});this.addKeyDef("CLEAR","clear",function(a){c.keypad._clearValue(a)});this.addKeyDef("BACK","back",function(a){c.keypad._backValue(a)});this.addKeyDef("SHIFT","shift",function(a){c.keypad._shiftKeypad(a)});this.addKeyDef("SPACE_BAR","spacebar",function(a){c.keypad._selectValue(a,
" ")},true);this.addKeyDef("SPACE","space");this.addKeyDef("HALF_SPACE","half-space");this.addKeyDef("ENTER","enter",function(a){c.keypad._selectValue(a,"\r")},true);this.addKeyDef("TAB","tab",function(a){c.keypad._selectValue(a,"\t")},true);this.qwertyAlphabetic=["qwertyuiop","asdfghjkl","zxcvbnm"];this.qwertyLayout=["!@#$%^&*()_="+this.HALF_SPACE+this.SPACE+this.CLOSE,this.HALF_SPACE+"`~[]{}<>\\|/"+this.SPACE+"789","qwertyuiop'\""+this.HALF_SPACE+"456",this.HALF_SPACE+"asdfghjkl;:"+this.SPACE+"123",
this.SPACE+"zxcvbnm,.?"+this.SPACE+this.HALF_SPACE+"-0+",""+this.TAB+this.ENTER+this.SPACE_BAR+this.SHIFT+this.HALF_SPACE+this.BACK+this.CLEAR];this.regional=[];this.regional[""]={buttonText:"...",buttonStatus:"Open the keypad",closeText:"Close",closeStatus:"Close the keypad",clearText:"Clear",clearStatus:"Erase all the text",backText:"Back",backStatus:"Erase the previous character",spacebarText:"&nbsp;",spacebarStatus:"Space",enterText:"Enter",enterStatus:"Carriage return",tabText:"\u2192",tabStatus:"Horizontal tab",
shiftText:"Shift",shiftStatus:"Toggle upper/lower case characters",alphabeticLayout:this.qwertyAlphabetic,fullLayout:this.qwertyLayout,isAlphabetic:this.isAlphabetic,isNumeric:this.isNumeric,isRTL:false};this._defaults={showOn:"focus",buttonImage:"",buttonImageOnly:false,showAnim:"show",showOptions:{},duration:"normal",appendText:"",useThemeRoller:false,keypadClass:"tooltip notification",prompt:"",layout:["123"+this.CLOSE,"456"+this.CLEAR,"789"+this.BACK,this.SPACE+"0"],separator:"",target:null,keypadOnly:true,
randomiseAlphabetic:false,randomiseNumeric:false,randomiseOther:false,randomiseAll:false,beforeShow:null,onKeypress:null,onClose:null};c.extend(this._defaults,this.regional[""]);this.mainDiv=c('<div class="'+this._mainDivClass+'" style="display: none;"></div>')}function r(a,b){c.extend(a,b);for(var d in b)if(b[d]==null||b[d]==void 0)a[d]=b[d];return a}c.extend(q.prototype,{markerClassName:"hasKeypad",_mainDivClass:"keypad-popup",_inlineClass:"keypad-inline",_appendClass:"keypad-append",_triggerClass:"keypad-trigger",
_disableClass:"keypad-disabled",_inlineEntryClass:"keypad-keyentry",_coverClass:"keypad-cover",setDefaults:function(a){r(this._defaults,a||{});return this},addKeyDef:function(a,b,c,e){if(this._keyCode==32)throw"Only 32 special keys allowed";this[a]=String.fromCharCode(this._keyCode++);this._specialKeys.push({code:this[a],id:a,name:b,action:c,noHighlight:e});return this},_attachKeypad:function(a,b){var d=a.nodeName.toLowerCase()!="input"&&a.nodeName.toLowerCase()!="textarea",e={_inline:d,_mainDiv:d?
c('<div class="'+this._inlineClass+'"></div>'):c.keypad.mainDiv,ucase:false};e.settings=c.extend({},b||{});this._setInput(a,e);this._connectKeypad(a,e);d?(c(a).append(e._mainDiv).bind("click.keypad",function(){e._input.focus()}),this._updateKeypad(e)):c(a).is(":disabled")&&this._disableKeypad(a)},_setInput:function(a,b){b._input=c(!b._inline?a:this._get(b,"target")||'<input type="text" class="'+this._inlineEntryClass+'" disabled="disabled"/>');b._inline&&(a=c(a),a.find("input").remove(),this._get(b,
"target")||a.append(b._input))},_connectKeypad:function(a,b){var d=c(a);if(!d.hasClass(this.markerClassName)){var e=this._get(b,"appendText"),f=this._get(b,"isRTL");if(e)d[f?"before":"after"]('<span class="'+this._appendClass+'">'+e+"</span>");if(!b._inline&&(e=this._get(b,"showOn"),(e=="focus"||e=="both")&&d.focus(this._showKeypad).keydown(this._doKeyDown),e=="button"||e=="both")){var e=this._get(b,"buttonText"),h=this._get(b,"buttonStatus"),g=this._get(b,"buttonImage"),e=c(this._get(b,"buttonImageOnly")?
c('<img src="'+g+'" alt="'+h+'" title="'+h+'"/>'):c('<button type="button" title="'+h+'"></button>').html(g==""?e:c('<img src="'+g+'" alt="'+h+'" title="'+h+'"/>')));d[f?"before":"after"](e);e.addClass(this._triggerClass).click(function(){c.keypad._keypadShowing&&c.keypad._lastField==a?c.keypad._hideKeypad():c.keypad._showKeypad(a);return false})}b.saveReadonly=d.attr("readonly");d.addClass(this.markerClassName)[this._get(b,"keypadOnly")?"attr":"removeAttr"]("readonly",true).bind("setData.keypad",
function(a,c,d){b.settings[c]=d}).bind("getData.keypad",function(a,c){return this._get(b,c)});c.data(a,"keypad",b)}},_destroyKeypad:function(a){var b=c(a);if(b.hasClass(this.markerClassName)){var d=c.data(a,"keypad");this._curInst==d&&this._hideKeypad();b.siblings("."+this._appendClass).remove().end().siblings("."+this._triggerClass).remove().end().prev("."+this._inlineEntryClass).remove();b.empty().unbind("focus",this._showKeypad).removeClass(this.markerClassName)[d.saveReadonly?"attr":"removeAttr"]("readonly",
true);c.removeData(d._input[0],"keypad");c.removeData(a,"keypad")}},_enableKeypad:function(a){var b=c(a);if(b.hasClass(this.markerClassName)){var d=a.nodeName.toLowerCase();if(d=="input"||d=="textarea")a.disabled=false,b.siblings("button."+this._triggerClass).each(function(){this.disabled=false}).end().siblings("img."+this._triggerClass).css({opacity:"1.0",cursor:""});else if(d=="div"||d=="span")b.children("."+this._disableClass).remove(),c.data(a,"keypad")._mainDiv.find("button").attr("disabled",
"");this._disabledFields=c.map(this._disabledFields,function(b){return b==a?null:b})}},_disableKeypad:function(a){var b=c(a);if(b.hasClass(this.markerClassName)){var d=a.nodeName.toLowerCase();if(d=="input"||d=="textarea")a.disabled=true,b.siblings("button."+this._triggerClass).each(function(){this.disabled=true}).end().siblings("img."+this._triggerClass).css({opacity:"0.5",cursor:"default"});else if(d=="div"||d=="span"){var d=b.children("."+this._inlineClass),e=d.offset(),f={left:0,top:0};d.parents().each(function(){if(c(this).css("position")==
"relative")return f=c(this).offset(),false});b.prepend('<div class="'+this._disableClass+'" style="width: '+d.outerWidth()+"px; height: "+d.outerHeight()+"px; left: "+(e.left-f.left)+"px; top: "+(e.top-f.top)+'px;"></div>');c.data(a,"keypad")._mainDiv.find("button").attr("disabled","disabled")}this._disabledFields=c.map(this._disabledFields,function(b){return b==a?null:b});this._disabledFields[this._disabledFields.length]=a}},_isDisabledKeypad:function(a){return a&&c.inArray(a,this._disabledFields)>
-1},_changeKeypad:function(a,b,d){var e=b||{};typeof b=="string"&&(e={},e[b]=d);if(b=c.data(a,"keypad"))this._curInst==b&&this._hideKeypad(),r(b.settings,e),this._setInput(c(a),b),this._updateKeypad(b)},_showKeypad:function(a){a=a.target||a;if(!(c.keypad._isDisabledKeypad(a)||c.keypad._lastField==a)){var b=c.data(a,"keypad");c.keypad._hideKeypad(null,"");c.keypad._lastField=a;c.keypad._pos=c.keypad._findPos(a);c.keypad._pos[1]+=a.offsetHeight;var d=false;c(a).parents().each(function(){d|=c(this).css("position")==
"fixed";return!d});d&&c.browser.opera&&(c.keypad._pos[0]-=document.documentElement.scrollLeft,c.keypad._pos[1]-=document.documentElement.scrollTop);a={left:c.keypad._pos[0],top:c.keypad._pos[1]};c.keypad._pos=null;b._mainDiv.css({position:"absolute",display:"block",top:"-1000px",width:c.browser.opera?"1000px":"auto"});c.keypad._updateKeypad(b);a=c.keypad._checkOffset(b,a,d);b._mainDiv.css({position:d?"fixed":"absolute",display:"none",left:a.left+"px",top:a.top+"px"});var a=c.keypad._get(b,"showAnim"),
e=c.keypad._get(b,"duration"),e=e=="normal"&&c.ui&&c.ui.version>="1.8"?"_default":e,f=function(){c.keypad._keypadShowing=true;var a=c.keypad._getBorders(b._mainDiv);b._mainDiv.find("iframe."+c.keypad._coverClass).css({left:-a[0],top:-a[1],width:b._mainDiv.outerWidth(),height:b._mainDiv.outerHeight()})};if(c.effects&&c.effects[a]){var h=b._mainDiv.data(),g;for(g in h)g.match(/^ec\.storage\./)&&(h[g]=b._mainDiv.css(g.replace(/ec\.storage\./,"")));b._mainDiv.data(h).show(a,c.keypad._get(b,"showOptions"),
e,f)}else b._mainDiv[a||"show"](a?e:"",f);a||f();b._input[0].type!="hidden"&&b._input[0].focus();c.keypad._curInst=b}},_updateKeypad:function(a){var b=this._getBorders(a._mainDiv);a._mainDiv.empty().append(this._generateHTML(a)).find("iframe."+this._coverClass).css({left:-b[0],top:-b[1],width:a._mainDiv.outerWidth(),height:a._mainDiv.outerHeight()});a._mainDiv.removeClass().addClass(this._get(a,"keypadClass")+(this._get(a,"useThemeRoller")?" ui-widget ui-widget-content":"")+(this._get(a,"isRTL")?
" keypad-rtl":"")+" "+(a._inline?this._inlineClass:this._mainDivClass));(b=this._get(a,"beforeShow"))&&b.apply(a._input?a._input[0]:null,[a._mainDiv,a])},_getBorders:function(a){var b=function(a){var b=c.browser.msie?1:0;return{thin:1+b,medium:3+b,thick:5+b}[a]||a};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(a,b,d){var e=a._input?this._findPos(a._input[0]):null,f=window.innerWidth||document.documentElement.clientWidth,h=window.innerHeight||
document.documentElement.clientHeight,g=document.documentElement.scrollLeft||document.body.scrollLeft,j=document.documentElement.scrollTop||document.body.scrollTop;if(c.browser.msie&&parseInt(c.browser.version,10)<7||c.browser.opera){var k=0;a._mainDiv.find(":not(div,iframe)").each(function(){k=Math.max(k,this.offsetLeft+c(this).outerWidth()+parseInt(c(this).css("margin-right"),10))});a._mainDiv.css("width",k)}this._get(a,"isRTL")||b.left+a._mainDiv.outerWidth()-g>f?b.left=Math.max(d?0:g,e[0]+(a._input?
a._input.outerWidth():0)-(d?g:0)-a._mainDiv.outerWidth()-(d&&c.browser.opera?document.documentElement.scrollLeft:0)):b.left-=d?g:0;b.top+a._mainDiv.outerHeight()-j>h?b.top=Math.max(d?0:j,e[1]-(d?j:0)-a._mainDiv.outerHeight()-(d&&c.browser.opera?document.documentElement.scrollTop:0)):b.top-=d?j:0;return b},_findPos:function(a){for(;a&&(a.type=="hidden"||a.nodeType!=1);)a=a.nextSibling;a=c(a).offset();return[a.left,a.top]},_hideKeypad:function(a,b){var d=this._curInst;if(d&&!(a&&d!=c.data(a,"keypad"))){if(this._keypadShowing){var b=
b!=null?b:this._get(d,"duration"),b=b=="normal"&&c.ui&&c.ui.version>="1.8"?"_default":b,e=this._get(d,"showAnim");if(c.effects&&c.effects[e])d._mainDiv.hide(e,this._get(d,"showOptions"),b);else d._mainDiv[e=="slideDown"?"slideUp":e=="fadeIn"?"fadeOut":"hide"](e?b:"")}(e=this._get(d,"onClose"))&&e.apply(d._input?d._input[0]:null,[d._input.val(),d]);if(this._keypadShowing)this._keypadShowing=false,this._lastField=null;d._inline&&d._input.val("");this._curInst=null}},_doKeyDown:function(a){a.keyCode==
9&&(c.keypad.mainDiv.stop(true,true),c.keypad._hideKeypad())},_checkExternalClick:function(a){c.keypad._curInst&&(a=c(a.target),!a.parents().andSelf().is("."+c.keypad._mainDivClass)&&!a.hasClass(c.keypad.markerClassName)&&!a.parents().andSelf().hasClass(c.keypad._triggerClass)&&c.keypad._keypadShowing&&c.keypad._hideKeypad())},_shiftKeypad:function(a){a.ucase=!a.ucase;this._updateKeypad(a);a._input.focus()},_clearValue:function(a){this._setValue(a,"",0);this._notifyKeypress(a,c.keypad.DEL)},_backValue:function(a){var b=
a._input[0],d=a._input.val(),e=[d.length,d.length];b.setSelectionRange?e=a._input.attr("readonly")||a._input.attr("disabled")?e:[b.selectionStart,b.selectionEnd]:b.createTextRange&&(e=a._input.attr("readonly")||a._input.attr("disabled")?e:this._getIERange(b));this._setValue(a,d.length==0?"":d.substr(0,e[0]-1)+d.substr(e[1]),e[0]-1);this._notifyKeypress(a,c.keypad.BS)},_selectValue:function(a,b){this.insertValue(a._input[0],b);this._setValue(a,a._input.val());this._notifyKeypress(a,b)},insertValue:function(a,
b){var a=a.jquery?a:c(a),d=a[0],e=a.val(),f=[e.length,e.length];d.setSelectionRange?f=a.attr("readonly")||a.attr("disabled")?f:[d.selectionStart,d.selectionEnd]:d.createTextRange&&(f=a.attr("readonly")||a.attr("disabled")?f:this._getIERange(d));a.val(e.substr(0,f[0])+b+e.substr(f[1]));pos=f[0]+b.length;a.is(":visible")&&a.focus();d.setSelectionRange?a.is(":visible")&&d.setSelectionRange(pos,pos):d.createTextRange&&(f=d.createTextRange(),f.move("character",pos),f.select())},_getIERange:function(a){a.focus();
var b=document.selection.createRange().duplicate(),c=this._getIETextRange(a);c.setEndPoint("EndToStart",b);a=function(a){for(var b=a.text,c=b;;)if(a.compareEndPoints("StartToEnd",a)==0)break;else if(a.moveEnd("character",-1),a.text==b)c+="\r\n";else break;return c};c=a(c);b=a(b);return[c.length,c.length+b.length]},_getIETextRange:function(a){var b=a.nodeName.toLowerCase()=="input",c=b?a.createTextRange():document.body.createTextRange();b||c.moveToElementText(a);return c},_setValue:function(a,b){var c=
a._input.attr("maxlength");c>-1&&(b=b.substr(0,c));a._input.val(b);this._get(a,"onKeypress")||a._input.trigger("change")},_notifyKeypress:function(a,b){var c=this._get(a,"onKeypress");c&&c.apply(a._input?a._input[0]:null,[b,a._input.val(),a])},_get:function(a,b){return a.settings[b]!==void 0?a.settings[b]:this._defaults[b]},_generateHTML:function(a){var b=this._get(a,"useThemeRoller");this._get(a,"isRTL");for(var d=this._get(a,"prompt"),e=this._get(a,"separator"),f=!d?"":'<div class="keypad-prompt'+
(b?" ui-widget-header ui-corner-all":"")+'">'+d+"</div>",d=this._randomiseLayout(a),h=0;h<d.length;h++){f+='<div class="keypad-row">';for(var g=d[h].split(e),j=0;j<g.length;j++){a.ucase&&(g[j]=g[j].toUpperCase());var k=this._specialKeys[g[j].charCodeAt(0)];f+=k?k.action?'<button type="button" class="keypad-special keypad-'+k.name+(b?" ui-corner-all ui-state-default"+(k.noHighlight?"":" ui-state-highlight"):"")+'" title="'+this._get(a,k.name+"Status")+'">'+(this._get(a,k.name+"Text")||"&nbsp;")+"</button>":
'<div class="keypad-'+k.name+'"></div>':'<button type="button" class="keypad-key'+(b?" ui-corner-all ui-state-default":"")+'">'+(g[j]==" "?"&nbsp;":g[j])+"</button>"}f+="</div>"}f+='<div style="clear: both;"></div>'+(!a._inline&&c.browser.msie&&parseInt(c.browser.version,10)<7?'<iframe src="javascript:false;" class="'+c.keypad._coverClass+'"></iframe>':"");var f=c(f),n="keypad-key-down"+(b?" ui-state-active":"");f.find("button").mousedown(function(){c(this).addClass(n)}).mouseup(function(){c(this).removeClass(n)}).mouseout(function(){c(this).removeClass(n)}).filter(".keypad-key").click(function(){c.keypad._selectValue(a,
c(this).text())});c.each(this._specialKeys,function(b,c){f.find(".keypad-"+c.name).click(function(){c.action.apply(a._input,[a])})});return f},_randomiseLayout:function(a){var b=this._get(a,"randomiseNumeric"),c=this._get(a,"randomiseAlphabetic"),e=this._get(a,"randomiseOther"),f=this._get(a,"randomiseAll"),h=this._get(a,"layout");if(!b&&!c&&!e&&!f)return h;for(var g=this._get(a,"isNumeric"),j=this._get(a,"isAlphabetic"),a=this._get(a,"separator"),k=[],n=[],o=[],p=[],m=0;m<h.length;m++){p[m]="";for(var l=
h[m].split(a),i=0;i<l.length;i++)this._isControl(l[i])||(f?o.push(l[i]):g(l[i])?k.push(l[i]):j(l[i])?n.push(l[i]):o.push(l[i]))}b&&this._shuffle(k);c&&this._shuffle(n);(e||f)&&this._shuffle(o);for(m=e=c=b=0;m<h.length;m++){l=h[m].split(a);for(i=0;i<l.length;i++)p[m]+=(this._isControl(l[i])?l[i]:f?o[e++]:g(l[i])?k[b++]:j(l[i])?n[c++]:o[e++])+a}return p},_isControl:function(a){return a<" "},isAlphabetic:function(a){return a>="A"&&a<="Z"||a>="a"&&a<="z"},isNumeric:function(a){return a>="0"&&a<="9"},
_shuffle:function(a){for(var b=a.length-1;b>0;b--){var c=Math.floor(Math.random()*a.length),e=a[b];a[b]=a[c];a[c]=e}}});c.fn.keypad=function(a){var b=Array.prototype.slice.call(arguments,1);return a=="isDisabled"?c.keypad["_"+a+"Keypad"].apply(c.keypad,[this[0]].concat(b)):this.each(function(){typeof a=="string"?c.keypad["_"+a+"Keypad"].apply(c.keypad,[this].concat(b)):c.keypad._attachKeypad(this,a)})};c.keypad=new q;c(function(){c(document.body).append(c.keypad.mainDiv).mousedown(c.keypad._checkExternalClick)})})(jQuery);
