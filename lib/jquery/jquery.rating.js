jQuery.rating={build:function(o){var p={step:true,isDisabled:false,length:5,decimalLength:0,rateMax:10,onSuccess:null,onError:null};if(this.length>0)return jQuery(this).each(function(){function i(a){a=parseFloat(a*100/c*d.rateMax/100);switch(d.decimalLength){case 1:a=Math.ceil(a*10)/10;break;case 2:a=Math.ceil(a*100)/100;break;case 3:a=Math.ceil(a*1E3)/1E3;break;default:a=Math.ceil(a*1)/1}return a}function j(a){if(!a)return 0;return a.offsetLeft+j(a.offsetParent)}var d=$.extend(p,o),b=$(this),e=0,
f=b.width(),k=0,q=b.hasClass("disabled")||d.isDisabled?true:false;if(f!=16)f=parseInt(f/d.length);k=b.height();var r=parseFloat(b.attr("data")),s=b.attr("data-url"),c=f*d.length,g=r/d.rateMax*c,l=Math.round(c/d.rateMax),h=jQuery("<a>",{"class":"star-rating-average",css:{display:"inline-block",width:g,height:k,"background-repeat":"repeat-x"}}).appendTo(b),m=jQuery("<a>",{"class":"star-rating-default",css:{display:"inline-block",width:c-g,height:k,"background-position":"100% 0","background-repeat":"repeat-x"}}).appendTo(b);
h.css({"-moz-opacity":1,"-webkit-opacity":1,opacity:1,filter:"none"});b.css({overflow:"hidden","white-space":"nowrap",width:c});typeof b.tipsy!="undefined"&&b.tipsy();q||b.bind({mouseenter:function(){j(this)},mouseover:function(){b.css("cursor","pointer")},mouseleave:function(){b.css("cursor","default");h.width(g);m.width(c-g)},mousemove:function(a){var n=j(this);a=a.pageX-n;e=d.step?Math.floor(a/l)*l+l:a;h.width(e);m.width(c-e);typeof b.tipsy!="undefined"?b.attr("title",b.attr("original-title").replace(/[0-9]+/,
i(e))).tipsy("show"):b.attr("title",b.attr("title").replace(/[0-9]+/,i(e)))},click:function(a){b.unbind().css("cursor","default").addClass("disabled");typeof b.tipsy!="undefined"&&b.tipsy();a.preventDefault();a=i(e);h.width(e);m.width(c-e);$.post(s,{rate:a},function(n){jQuery.loading(false);jQuery.loading(true,{html:n,text:"",max:5E3})})}})})}};jQuery.fn.rating=jQuery.rating.build;
