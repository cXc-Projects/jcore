jQuery.rating={build:function(n){var o={step:true,isDisabled:false,length:5,decimalLength:0,rateMax:10,onSuccess:null,onError:null};if(this.length>0)return jQuery(this).each(function(){function h(a){a=parseFloat(a*100/c*d.rateMax/100);switch(d.decimalLength){case 1:a=Math.ceil(a*10)/10;break;case 2:a=Math.ceil(a*100)/100;break;case 3:a=Math.ceil(a*1E3)/1E3;break;default:a=Math.ceil(a*1)/1}return a}function i(a){return!a?0:a.offsetLeft+i(a.offsetParent)}var d=$.extend(o,n),b=$(this),e=0,f=b.width(),
j=0,p=b.hasClass("disabled")||d.isDisabled?true:false;f!=16&&(f=parseInt(f/d.length));var j=b.height(),q=parseFloat(b.attr("data")),r=b.attr("data-url"),c=f*d.length,g=q/d.rateMax*c,k=Math.round(c/d.rateMax),l=jQuery("<a>").addClass("star-rating-average").css({display:"inline-block",width:g,height:j,"background-repeat":"repeat-x","-moz-opacity":1,"-webkit-opacity":1,opacity:1,filter:"none"}).appendTo(b),m=jQuery("<a>").addClass("star-rating-default").css({display:"inline-block",width:c-g,height:j,
"background-position":"100% 0","background-repeat":"repeat-x"}).appendTo(b);b.css({overflow:"hidden","white-space":"nowrap","text-indent":0,width:c});typeof b.tipsy!="undefined"&&b.tipsy();p||b.mouseenter(function(){i(this)}).mouseover(function(){b.css("cursor","pointer")}).mouseleave(function(){b.css("cursor","default");l.width(g);m.width(c-g)}).mousemove(function(a){var f=i(this),a=a.pageX-f;e=d.step?Math.floor(a/k)*k+k:a;l.width(e);m.width(c-e);typeof b.tipsy!="undefined"?b.attr("title",b.attr("original-title").replace(/[0-9]+/,
h(e))).tipsy("show"):b.attr("title",b.attr("title").replace(/[0-9]+/,h(e)))}).click(function(a){b.unbind().css("cursor","default").addClass("disabled");typeof b.tipsy!="undefined"&&b.tipsy();a.preventDefault();a=h(e);l.width(e);m.width(c-e);$.post(r,{rate:a},function(a){jQuery.loading(false);jQuery.loading(true,{html:a,text:"",max:5E3})})})})}};jQuery.fn.rating=jQuery.rating.build;
