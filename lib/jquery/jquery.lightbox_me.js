(function(b){b.fn.lightbox_me=function(l){return this.each(function(){function h(e){c[a.disappearEffect](a.lightboxDisappearSpeed,function(){e&&m();a.destroyOnClose?c.remove():c.hide();c.find(a.closeSelector).unbind("click");c.unbind("close");c.unbind("resize");b(window).unbind("scroll",f);b(window).unbind("resize",f)})}function m(){d.fadeOut(a.overlayDisappearSpeed,function(){b(window).unbind("resize",i);d.remove();d.unbind("click");a.onClose()})}function i(){if(b(window).height()<b(document).height())d.css({height:b(document).height()+
"px"});else{d.css({height:"100%"});j&&b("html,body").css("height","100%")}}function f(){var e=c[0].style;if(c.height()+80>=b(window).height()&&(c.css("position")!="absolute"||j)){var k=b(document).scrollTop()+40;c.css({position:"absolute",top:k+"px",marginTop:0});j&&e.removeExpression("top")}else if(c.height()+80<b(window).height())if(j){e.position="absolute";if(a.centered){e.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"');
e.marginTop=0}else{k=a.modalCSS&&a.modalCSS.top?parseInt(a.modalCSS.top):0;e.setExpression("top","((blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+k+') + "px"')}}else a.centered?c.css({position:"fixed",top:"50%",marginTop:c.outerHeight()/2*-1}):c.css({position:"fixed"}).css(a.modalCSS)}var a=b.extend({},b.fn.lightbox_me.defaults,l),d=b("div."+a.classPrefix+"_overlay"),c=b(this),g=b("iframe#lb_iframe"),j=b.browser.msie&&b.browser.version<
7;if(d.length>0)d[0].removeModal();else d=b('<div class="'+a.classPrefix+'_overlay" style="display:none;"/>');g=g.length>0?g:g=b('<iframe id="lb_iframe" style="z-index: '+(a.zIndex+1)+'; display: none; border: none; margin: 0; padding: 0; position: absolute; width: 100%; height: 100%; top: 0; left: 0;"/>');if(j){var n=/^https/i.test(window.location.href||"")?"javascript:false":"about:blank";g.attr("src",n);b("body").append(g)}b("body").append(c).append(d);f();c.css({left:"50%",marginLeft:c.outerWidth()/
2*-1,zIndex:a.zIndex+3});i();d.css({position:"absolute",width:"100%",top:0,left:0,right:0,bottom:0,zIndex:a.zIndex+2}).css(a.overlayCSS);d.is(":hidden")?d.fadeIn(a.overlaySpeed,function(){c[a.appearEffect](a.lightboxSpeed,function(){i();a.onLoad()})}):c[a.appearEffect](a.lightboxSpeed,function(){i();a.onLoad()});b(window).resize(i).resize(f).scroll(f).keydown(function(e){if((e.keyCode==27||e.DOM_VK_ESCAPE==27&&e.which==0)&&a.closeEsc)h(true)});c.find(a.closeSelector).click(function(){h(true);return false});
d.click(function(){if(a.closeClick){h(true);return false}});c.bind("close",function(){h(true)});c.bind("resize",f);d[0].removeModal=h})};b.fn.lightbox_me.defaults={appearEffect:"fadeIn",overlaySpeed:300,lightboxSpeed:"fast",disappearEffect:"fadeOut",overlayDisappearSpeed:300,lightboxDisappearSpeed:"fast",closeSelector:".close",closeClick:true,closeEsc:true,destroyOnClose:false,onLoad:function(){},onClose:function(){},classPrefix:"lb",zIndex:999,centered:false,modalCSS:{top:"40px"},overlayCSS:{background:"black",
opacity:0.6}}})(jQuery);
