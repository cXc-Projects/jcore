(function(a){function h(c,b){this.$element=a(c);this.options=b;this.enabled=!0;this.fixTitle()}h.prototype={show:function(){var c=this.getTitle();if(c&&this.enabled){var b=this.tip();b.find(".tipsy-inner")[this.options.html?"html":"text"](c);b[0].className="tipsy";b.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).appendTo(document.body);this.update();this.options.fade?b.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity}):b.css({visibility:"visible",
opacity:this.options.opacity})}},update:function(){if(this.enabled){var c=this.tip();c[0].className="tipsy"+(this.options.additionalClassName!=""?" "+this.options.additionalClassName:"");var b=a.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight}),f=c[0].offsetWidth,g=c[0].offsetHeight,d=typeof this.options.gravity=="function"?this.options.gravity.call(this.$element[0]):this.options.gravity,e;switch(d.charAt(0)){case "n":e={top:b.top+b.height+
this.options.offset,left:b.left+b.width/2-f/2};break;case "s":e={top:b.top-g-this.options.offset,left:b.left+b.width/2-f/2};break;case "e":e={top:b.top+b.height/2-g/2,left:b.left-f-this.options.offset};break;case "w":e={top:b.top+b.height/2-g/2,left:b.left+b.width+this.options.offset}}if(d.length==2)e.left=d.charAt(1)=="w"?b.left+b.width/2-15:b.left+b.width/2-f+15;if(e.left<0)e.left=0;c.css(e).addClass("tipsy-"+d)}},hide:function(){this.options.fade?this.tip().stop().fadeOut(function(){a(this).remove()}):
this.tip().remove()},fixTitle:function(){var c=this.$element;if(c.attr("title")||typeof c.attr("original-title")!="string")c.attr("original-title",c.attr("title")||"").removeAttr("title")},getTitle:function(){var c,b=this.$element,a=this.options;this.fixTitle();a=this.options;typeof a.title=="string"?c=b.attr(a.title=="title"?"original-title":a.title):typeof a.title=="function"&&(c=a.title.call(b[0]));return(c=(""+c).replace(/(^\s*|\s*$)/,""))||a.fallback},tip:function(){if(!this.$tip)this.$tip=a('<div class="tipsy"></div>').html('<div class="tipsy-arrow"></div><div class="tipsy-outer">'+
(this.options.closeButton?'<div class="tipsy-close-button"><a href="javascript://" onclick="jQuery(this).closest(\'.tipsy\').hide()"><span>x</span></a></div>':"")+'<div class="tipsy-inner"></div></div>');return this.$tip},validate:function(){if(!this.$element[0].parentNode)this.hide(),this.options=this.$element=null},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled}};a.fn.tipsy=function(c){function b(b){var d=a.data(b,"tipsy");
d||(d=new h(b,a.fn.tipsy.elementOptions(b,c)),a.data(b,"tipsy",d));return d}function f(){var a=b(this);a.hoverState="in";c.delayIn==0?a.show():(a.fixTitle(),setTimeout(function(){a.hoverState=="in"&&a.show()},c.delayIn))}function g(){var a=b(this);a.hoverState="out";c.delayOut==0?a.hide():setTimeout(function(){a.hoverState=="out"&&a.hide()},c.delayOut)}if(c===!0)return this.data("tipsy");else if(typeof c=="string"){var d=this.data("tipsy");if(d)d[c]();return this}c=a.extend({},a.fn.tipsy.defaults,
c);c.live||this.each(function(){b(this)});if(c.trigger!="manual"){var d=c.live?"live":"bind",e=c.trigger=="hover"?"mouseleave":"blur";this[d](c.trigger=="hover"?"mouseenter":"focus",f)[d](e,g)}return this};a.fn.tipsy.defaults={delayIn:0,delayOut:0,fade:!1,fallback:"",additionalClassName:"",gravity:"n",html:!1,live:!1,offset:0,opacity:0.8,title:"title",trigger:"hover",closeButton:!1};a.fn.tipsy.elementOptions=function(c,b){return a.metadata?a.extend({},b,a(c).metadata()):b};a.fn.tipsy.autoNS=function(){return a(this).offset().top>
a(document).scrollTop()+a(window).height()/2?"s":"n"};a.fn.tipsy.autoWE=function(){return a(this).offset().left>a(document).scrollLeft()+a(window).width()/2?"e":"w"}})(jQuery);
