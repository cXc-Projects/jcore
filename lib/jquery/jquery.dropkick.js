(function(f,s,q){function o(b,a,c){var e,d;e=b.attr("data-dk-dropdown-value");b=b.text();d=a.data("dropkick");$select=d.$select;$select.val(e);a.find(".dk_label").text(b);d.settings.change&&!c&&d.settings.change.call($select,e,b)}function k(b,a){a.find(".dk_option_current").removeClass("dk_option_current");b.addClass("dk_option_current");var c=b.prevAll("li").outerHeight()*b.prevAll("li").length;a.find(".dk_options_inner").animate({scrollTop:c+"px"},0)}function m(b){b.data("dropkick");b.find(".dk_options").css({top:b.find(".dk_toggle").outerHeight()-
1});b.toggleClass("dk_open")}function t(b,a){var c,e=[];c=b.replace("{{ id }}",a.id);c=c.replace("{{ label }}",a.label);c=c.replace("{{ tabindex }}",a.tabindex);if(a.options&&a.options.length)for(var d=0,h=a.options.length;d<h;d++){var i=f(a.options[d]),j=u,j=j.replace("{{ value }}",i.val()),j=j.replace("{{ current }}",p(i.val())===a.value?"dk_option_current":""),j=j.replace("{{ text }}",i.text());e[e.length]=j}c=f(c);c.find(".dk_options_inner").html(e.join(""));return c}function p(b){return f.trim(b).length>
0?b:false}var r=false;f.browser.msie&&f.browser.version.substr(0,1)<7?r=true:q.documentElement.className+=" dk_fouc";var l={},n=[],u='<li class="{{ current }}"><a data-dk-dropdown-value="{{ value }}">{{ text }}</a></li>',v={startSpeed:1E3,theme:false,change:false};l.init=function(b){b=f.extend({},v,b);return this.each(function(){var a=f(this),c=a.find(":selected").first(),e=a.find("option"),d=a.data("dropkick")||{},h=a.attr("id")||a.attr("name"),i=b.width||a.outerWidth(),j=a.attr("tabindex")?a.attr("tabindex"):
"",g=false;if(d.id)return a;else d.settings=b,d.tabindex=j,d.id=h,d.$original=c,d.$select=a,d.value=p(a.val())||p(c.attr("value")),d.label=c.text(),d.options=e;g=t('<div class="dk_container" id="dk_container_{{ id }}" tabindex="{{ tabindex }}"><a class="dk_toggle"><span class="dk_label">{{ label }}</span></a><div class="dk_options"><ul class="dk_options_inner"></ul></div></div>',d);g.find(".dk_toggle").css({width:i+"px"});a.before(g);g=f("#dk_container_"+h).fadeIn(b.startSpeed);c=b.theme?b.theme:
"default";g.addClass("dk_theme_"+c);d.theme=c;d.$dk=g;a.data("dropkick",d);g.data("dropkick",d);n[n.length]=a;g.bind("focus.dropkick",function(){g.addClass("dk_focus")}).bind("blur.dropkick",function(){g.removeClass("dk_open dk_focus")});setTimeout(function(){a.hide()},0)})};l.theme=function(b){var a=f(this).data("dropkick");a.$dk.removeClass("dk_theme_"+a.theme).addClass("dk_theme_"+b);a.theme=b};l.reset=function(){for(var b=0,a=n.length;b<a;b++){var c=n[b].data("dropkick"),e=c.$dk,d=e.find("li").first();
e.find(".dk_label").text(c.label);e.find(".dk_options_inner").animate({scrollTop:0},0);k(d,e);o(d,e,true)}};f.fn.dropkick=function(b){if(!r)if(l[b])return l[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return l.init.apply(this,arguments)};f(function(){f(".dk_toggle").live("click",function(b){var a=f(this).parents(".dk_container").first();m(a);"ontouchstart"in s&&(a.addClass("dk_touch"),a.find(".dk_options_inner").addClass("scrollable vertical"));b.preventDefault();
return false});f(".dk_options a").live(f.browser.msie?"mousedown":"click",function(b){var a=f(this),c=a.parents(".dk_container").first();c.data("dropkick");c.removeClass("dk_open");o(a,c);k(a.parent(),c);b.preventDefault();return false});f(q).bind("keydown.dk_nav",function(b){var a=f(".dk_container.dk_open"),c=f(".dk_container.dk_focus"),e=null;a.length?e=a:c.length&&!a.length&&(e=c);if(e){var a=e,d=b.keyCode;a.data("dropkick");var h=a.find(".dk_options"),c=a.hasClass("dk_open"),i=a.find(".dk_option_current"),
e=h.find("li").first(),h=h.find("li").last();switch(d){case 13:c?(o(i.find("a"),a),a.removeClass("dk_open")):m(a);b.preventDefault();break;case 38:e=i.prev("li");c?e.length?k(e,a):k(h,a):m(a);b.preventDefault();break;case 40:c?(c=i.next("li").first(),c.length?k(c,a):k(e,a)):m(a),b.preventDefault()}}})})})(jQuery,window,document);
